{
  "hash": "9a683d6be2b707dd6e99512e56207166",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: '3. Creating visualizations with maps'\njupyter: python3\nresources:\n    - assets/final_cuse_parking_violations.csv\n    - assets/stlucia.geojson\n    - assets/us-states.geojson\n---\n\n\nIn this tutorial you will learn how to create maps with the `folium` and `geopandas`\npackages.\n\n::: {.callout-note}\nTo run this tutorial you will need `geopandas` and `folium` installed. You will also\nneed `streamlit-folium` to use folium with Streamlit. To install these packages,\nopen a Terminal, activate your `ist356` conda environment, and run:\n\n```{bash}\npip install folium geopandas streamlit-folium\n```\n:::\n\n## Mapping\n\nMapping is a powerful way to visualize data. You can place points on a map, draw lines, and shade areas.\n\n## Map Visualizations with Folium\n\nTo create map visualizations, we will use [folium](https://python-visualization.github.io/folium/latest/),\nwhich is a Python wrapper for the Leaflet.js library. \n\nFolium uses [OpenStreetMap](https://www.openstreetmap.org/) for drawing maps.\nIt is a free/open source alternative to a service like Google Maps.\n\n::: {#f513349e .cell execution_count=1}\n``` {.python .cell-code}\nimport folium\nJMA = (43.0362, -76.1363)\nmap1 = folium.Map(location=JMA, zoom_start=18)\njma_marker = folium.Marker(JMA, popup='JMA Wireless Dome', tooltip=\"JMA\").add_to(map1)\nmap1\n```\n\n::: {.cell-output .cell-output-display execution_count=1}\n``````````````````{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_821b22d68bc4e5703ea4d94ac1107d96 {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_821b22d68bc4e5703ea4d94ac1107d96&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_821b22d68bc4e5703ea4d94ac1107d96 = L.map(\n                &quot;map_821b22d68bc4e5703ea4d94ac1107d96&quot;,\n                {\n                    center: [43.0362, -76.1363],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 18,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_74fcb54735dcb8277d22ef1bdf064943 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_74fcb54735dcb8277d22ef1bdf064943.addTo(map_821b22d68bc4e5703ea4d94ac1107d96);\n        \n    \n            var marker_00ff273cc952cccdbac18fdc32142164 = L.marker(\n                [43.0362, -76.1363],\n                {\n}\n            ).addTo(map_821b22d68bc4e5703ea4d94ac1107d96);\n        \n    \n        var popup_6f1554330e535ecc7e79d83e57dc4368 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_a8f3a2eae9c1c165cf13dcd98017f581 = $(`&lt;div id=&quot;html_a8f3a2eae9c1c165cf13dcd98017f581&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;JMA Wireless Dome&lt;/div&gt;`)[0];\n                popup_6f1554330e535ecc7e79d83e57dc4368.setContent(html_a8f3a2eae9c1c165cf13dcd98017f581);\n            \n        \n\n        marker_00ff273cc952cccdbac18fdc32142164.bindPopup(popup_6f1554330e535ecc7e79d83e57dc4368)\n        ;\n\n        \n    \n    \n            marker_00ff273cc952cccdbac18fdc32142164.bindTooltip(\n                `&lt;div&gt;\n                     JMA\n                 &lt;/div&gt;`,\n                {\n  &quot;sticky&quot;: true,\n}\n            );\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n``````````````````\n:::\n:::\n\n\n::: {.callout-note}\n# Don't name maps `map`\nNotice in the above block we named the map that we created `map1`. You may be tempted\nto name the map `map` instead. It's perfectly fine for you to do so, however, `map` is\nalso the name of a Python in-built function. The [map](https://docs.python.org/3/library/functions.html#map)\nfunction is used to apply a function to a list of values. If you name an instance\nof a map `map` in your code, you will overwrite the `map` function. This means that you will not\nbe able to use the map function in the rest of your code! Even if you don't use the\n`map` function often, you may find that you want to use it at some point in the future.\nFor this reason, *it's best not to name map instances `map`.* Call them something else,\nlike `map1`, `mp`, etc.\n:::\n\n### Folium and Streamlit\n\nTo display folium maps to display in Streamlit, you need to use the `streamlit_folium` module.\n\nThis module has two functions: \n\n- `folium_static` is used to display the map only.\n- `st_folium` is use to display the map and return data while the user interacts with the map.\n\nHere's an example:\n\n::: {#237612e7 .cell execution_count=2}\n``` {.python .cell-code}\nimport folium\nimport streamlit as st\nimport pandas as pd\n\nimport streamlit_folium as sf\n\n\nst.title('Streamlit Folium Example')\nJMA = (43.0362, -76.1363)\nHINDS = (43.0382, -76.1333)\nm1 = folium.Map(location=JMA, zoom_start=16)\nfolium.Marker(JMA, popup=\"JMA Wireless Dome\", tooltip=\"JMA\", icon=folium.Icon(color=\"red\")\n).add_to(m1)\nfolium.Marker(HINDS, popup=\"iSchool\", tooltip=\"Hinds Hall\", icon=folium.Icon(color=\"blue\")\n).add_to(m1)\n\nst.write('### Folium Map And Data')\nst_data = sf.st_folium(m1, width=725)\nst.write(st_data)\n\nm2 = folium.Map(location=JMA, zoom_start=16)\nfolium.Marker(JMA, popup=\"JMA Wireless Dome\", tooltip=\"JMA\", icon=folium.Icon(color=\"red\")\n).add_to(m2)\nfolium.Marker(HINDS, popup=\"iSchool\", tooltip=\"Hinds Hall\", icon=folium.Icon(color=\"blue\")\n).add_to(m2)\n\nst.write('### Folium Map Only')\nsf.folium_static(m2, width=725)\n```\n:::\n\n\n### Map Markers Colors and Icons\n\nThrough the `icon` named argument you can assign an icon to the popup. You must create a `folium.Icon()` to assign a custom icon. There are three named arguments:\n\n`color=` the color of the marker\n`icon_color=` the color of the icon on the marker\n`icon=` the name of the icon.\n\n\nValid colors are: `['red', 'blue', 'green', 'purple', 'orange', 'darkred', 'lightred', 'beige', 'darkblue', 'darkgreen', 'cadetblue', 'darkpurple', 'white', 'pink', 'lightblue', 'lightgreen', 'gray', 'black', 'lightgray']`\n\nValid icons can be found here: https://fontawesome.com/v4/icons/ Your mileage may vary here as not all the icons listed are available.\n\n### Mapping a dataframe\n\nTo map a dataframe:\n\n1. we need coordinates\n2. we need to use loop over the data, creating a marker for each row\n\nHere's an example using a dataframe that contains locations of various classes:\n\n::: {#2088b87b .cell execution_count=3}\n``` {.python .cell-code}\nimport pandas as pd\nclassesdf = pd.read_csv(\"https://raw.githubusercontent.com/mafudge/datasets/master/delimited/class-schedule.csv\")\nclassesdf.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Course</th>\n      <th>Day</th>\n      <th>Time</th>\n      <th>Building</th>\n      <th>Room</th>\n      <th>Lat</th>\n      <th>Lon</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>IST256</td>\n      <td>M</td>\n      <td>3:45pm</td>\n      <td>HBC</td>\n      <td>Gifford</td>\n      <td>43.03819</td>\n      <td>-76.13413</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>MAT221</td>\n      <td>TuTh</td>\n      <td>12:45pm</td>\n      <td>Bowne</td>\n      <td>104</td>\n      <td>43.03674</td>\n      <td>-76.13320</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>WRT206</td>\n      <td>MW</td>\n      <td>9:20am</td>\n      <td>Crouse</td>\n      <td>111</td>\n      <td>43.03852</td>\n      <td>-76.13676</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>COM222</td>\n      <td>TuTh</td>\n      <td>9:20am</td>\n      <td>NH II</td>\n      <td>232</td>\n      <td>43.04020</td>\n      <td>-76.13521</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>IST343</td>\n      <td>MW</td>\n      <td>2:15pm</td>\n      <td>Hinds</td>\n      <td>243</td>\n      <td>43.03834</td>\n      <td>-76.13364</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nLet's put a marker on the map showing the location of each class:\n\n::: {#491ba213 .cell execution_count=4}\n``` {.python .cell-code}\nschine = (43.03986, -76.13375)\nmap2 = folium.Map(location=schine, zoom_start=17)\n\nfor index, row in classesdf.iterrows():\n    text = f\"{row['Course']} {row['Day']} {row['Time']} {row['Building']}\"\n    dd = (row['Lat'], row['Lon'])\n    if row['Day'] == \"TuTh\":\n        markercolor = 'orange'\n    else:\n        markercolor = 'darkblue'\n    marker = folium.Marker(location=dd, popup=text, icon = folium.Icon(color = markercolor, icon=\"globe\"))\n    marker.add_to(map2)\nmap2\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_bf8696fde62720f7b905172fc42bb4d8 {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_bf8696fde62720f7b905172fc42bb4d8&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_bf8696fde62720f7b905172fc42bb4d8 = L.map(\n                &quot;map_bf8696fde62720f7b905172fc42bb4d8&quot;,\n                {\n                    center: [43.03986, -76.13375],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 17,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_2cc7b3de95110285156b2be82b96eb80 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_2cc7b3de95110285156b2be82b96eb80.addTo(map_bf8696fde62720f7b905172fc42bb4d8);\n        \n    \n            var marker_197322cd5b9c490aa2a7ff70cf53e0e8 = L.marker(\n                [43.03819, -76.13413],\n                {\n}\n            ).addTo(map_bf8696fde62720f7b905172fc42bb4d8);\n        \n    \n            var icon_c7f3cbcac3a35847438a17f90b9c909c = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;darkblue&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_4b6298597241cc21d811783f72051637 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_0d4ff1b384a453a3c74e506e993573a1 = $(`&lt;div id=&quot;html_0d4ff1b384a453a3c74e506e993573a1&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;IST256 M 3:45pm HBC&lt;/div&gt;`)[0];\n                popup_4b6298597241cc21d811783f72051637.setContent(html_0d4ff1b384a453a3c74e506e993573a1);\n            \n        \n\n        marker_197322cd5b9c490aa2a7ff70cf53e0e8.bindPopup(popup_4b6298597241cc21d811783f72051637)\n        ;\n\n        \n    \n    \n                marker_197322cd5b9c490aa2a7ff70cf53e0e8.setIcon(icon_c7f3cbcac3a35847438a17f90b9c909c);\n            \n    \n            var marker_0fa464e867c2b009c6a086b8745469e4 = L.marker(\n                [43.03674, -76.1332],\n                {\n}\n            ).addTo(map_bf8696fde62720f7b905172fc42bb4d8);\n        \n    \n            var icon_639093d1763b6c746970af69fe93e89e = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;orange&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_460adc1eb236818390e4c1be0f928b95 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_4e1e79941f4c03037a705c979ec823b3 = $(`&lt;div id=&quot;html_4e1e79941f4c03037a705c979ec823b3&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;MAT221 TuTh 12:45pm Bowne&lt;/div&gt;`)[0];\n                popup_460adc1eb236818390e4c1be0f928b95.setContent(html_4e1e79941f4c03037a705c979ec823b3);\n            \n        \n\n        marker_0fa464e867c2b009c6a086b8745469e4.bindPopup(popup_460adc1eb236818390e4c1be0f928b95)\n        ;\n\n        \n    \n    \n                marker_0fa464e867c2b009c6a086b8745469e4.setIcon(icon_639093d1763b6c746970af69fe93e89e);\n            \n    \n            var marker_e80b14ed541bd1f48effd273203fc819 = L.marker(\n                [43.03852, -76.13676],\n                {\n}\n            ).addTo(map_bf8696fde62720f7b905172fc42bb4d8);\n        \n    \n            var icon_843eec6596d889096a37ecba2d53d863 = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;darkblue&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_c85a461dac7e810eeeb9330176fed195 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_bd0f6bcee3da4e8767df047e726babb9 = $(`&lt;div id=&quot;html_bd0f6bcee3da4e8767df047e726babb9&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;WRT206 MW 9:20am Crouse&lt;/div&gt;`)[0];\n                popup_c85a461dac7e810eeeb9330176fed195.setContent(html_bd0f6bcee3da4e8767df047e726babb9);\n            \n        \n\n        marker_e80b14ed541bd1f48effd273203fc819.bindPopup(popup_c85a461dac7e810eeeb9330176fed195)\n        ;\n\n        \n    \n    \n                marker_e80b14ed541bd1f48effd273203fc819.setIcon(icon_843eec6596d889096a37ecba2d53d863);\n            \n    \n            var marker_998e1c1c819ffd779be3299377b142e1 = L.marker(\n                [43.0402, -76.13521],\n                {\n}\n            ).addTo(map_bf8696fde62720f7b905172fc42bb4d8);\n        \n    \n            var icon_f376c59154b429da43afc8ba41e19b44 = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;orange&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_9bfe23bd5bbd57aaa3e902aaab0c51ef = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_aba9bc7b98b593d536a578ad9ee42219 = $(`&lt;div id=&quot;html_aba9bc7b98b593d536a578ad9ee42219&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;COM222 TuTh 9:20am NH II&lt;/div&gt;`)[0];\n                popup_9bfe23bd5bbd57aaa3e902aaab0c51ef.setContent(html_aba9bc7b98b593d536a578ad9ee42219);\n            \n        \n\n        marker_998e1c1c819ffd779be3299377b142e1.bindPopup(popup_9bfe23bd5bbd57aaa3e902aaab0c51ef)\n        ;\n\n        \n    \n    \n                marker_998e1c1c819ffd779be3299377b142e1.setIcon(icon_f376c59154b429da43afc8ba41e19b44);\n            \n    \n            var marker_7fe1f561e452b5be9d3d903480510cbd = L.marker(\n                [43.03834, -76.13364],\n                {\n}\n            ).addTo(map_bf8696fde62720f7b905172fc42bb4d8);\n        \n    \n            var icon_e871ae9cc88d28c20fd203adc41bea53 = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;darkblue&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_95d0573aa021dfd0cede4de011066a10 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_60ac4a03572b197526723eaff1c2395c = $(`&lt;div id=&quot;html_60ac4a03572b197526723eaff1c2395c&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;IST343 MW 2:15pm Hinds&lt;/div&gt;`)[0];\n                popup_95d0573aa021dfd0cede4de011066a10.setContent(html_60ac4a03572b197526723eaff1c2395c);\n            \n        \n\n        marker_7fe1f561e452b5be9d3d903480510cbd.bindPopup(popup_95d0573aa021dfd0cede4de011066a10)\n        ;\n\n        \n    \n    \n                marker_7fe1f561e452b5be9d3d903480510cbd.setIcon(icon_e871ae9cc88d28c20fd203adc41bea53);\n            \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n```\n:::\n:::\n\n\n:::: {.callout-caution appearance=\"simple\" icon=\"false\"}\n### Code Challenge 4.1\n\nStreamlit version of Parkmagic!\n\nThe file <a href=\"../assets/final_cuse_parking_violations.csv\">final_cuse_parking_violations.csv</a> (right click the link, then \nclick \"Copy Link Location\" to get the file's URL) contains a list parking tickets in Syracuse, along with their locations.\n\nWrite a Streamlit app that will load `final_cuse_parking_violations.csv` and create a map of the parking violations in Syracuse.\n\nSteps to take:\n\n- drop rows without a latitude and longitude\n- provide a dropdown to select the status of the violation\n- place pins on the map with the street name and the violation description\n- color code the pins based on day of the week \n- to make the map more readable take a random sample of 50 rows from the dataframe (you can do this with the DataFrame's\n[sample](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.sample.html) method).\n\n::: {.callout-caution collapse=\"true\" appearance=\"simple\" icon=\"false\"}\n#### Solution\n\n::: {#ab490c84 .cell execution_count=5}\n``` {.python .cell-code}\nimport pandas as pd\nimport streamlit as st\nimport folium\nimport streamlit_folium as sf\n\n\ndays  = {\n    'Sunday': 'red',\n    'Monday': 'orange',\n    'Tuesday': 'beige',\n    'Wednesday': 'green',\n    'Thursday': 'blue',\n    'Friday': 'purple',\n    'Saturday': 'gray'\n}\n\nst.title('Streamlit Park magic')\n\nmp = folium.Map(location=[43.0481, -76.1474], zoom_start=15)\ndf = pd.read_csv('../assets/final_cuse_parking_violations.csv')\ndf_dropped = df.dropna()\nstatus = df_dropped['status'].unique()\n\nstatus = st.selectbox('Select ticket status: ', status)\n\ndf_filtered = df_dropped[df_dropped['status'] == status]\n\ndf_sample = df_filtered.sample(50)\n\nfor i, row in df_sample.iterrows():\n    lat, lon = row['coords'].strip(\"(\").strip(\")\").split(',') \n    lat = float(lat.replace(\"'\", \"\"))\n    lon = float(lon.replace(\"'\", \"\"))\n    color = days[row['dayofweek']]\n    folium.Marker((lat, lon), popup=row['location'], tooltip=row['location'], icon=folium.Icon(color=color)).add_to(mp)\n\nsf.folium_static(mp)\n```\n:::\n\n\n:::\n::::\n\n## Geopandas\n\n[Geopandas](https://geopandas.org/) is a library that extends the Pandas library to work with geospatial data. It is built on top of the Shapely, Fiona, and Matplotlib libraries.\n\nGeopandas can read and write data in many formats, including shapefiles, GeoJSON, and PostGIS. It can also display data on a map.\n\nA Pandas DataFrame can be wrapped in a Geopandas' [GeoDataFrame](https://geopandas.org/en/stable/docs/reference/geodataframe.html).\nThis adds a `geometry` column to the dataframe that contains information about the shape of the object.\nThe geometry can be a POINT, LINE, or PLOYGON. The GeoDataFrame also has an\n[explore](https://geopandas.org/en/stable/docs/reference/api/geopandas.GeoDataFrame.explore.html)\nmethod to display the data on a map.  \n\nHere is an example of a GeoDataFrame wrapped around the class-schedule DataFrame we used earlier:\n\n::: {#9345c97e .cell execution_count=6}\n``` {.python .cell-code}\nimport geopandas as gpd\nclassesdf = pd.read_csv(\"https://raw.githubusercontent.com/mafudge/datasets/master/delimited/class-schedule.csv\")\ngdf = gpd.GeoDataFrame(classesdf, geometry=gpd.points_from_xy(classesdf['Lon'], classesdf['Lat']))\ngdf\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Course</th>\n      <th>Day</th>\n      <th>Time</th>\n      <th>Building</th>\n      <th>Room</th>\n      <th>Lat</th>\n      <th>Lon</th>\n      <th>geometry</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>IST256</td>\n      <td>M</td>\n      <td>3:45pm</td>\n      <td>HBC</td>\n      <td>Gifford</td>\n      <td>43.03819</td>\n      <td>-76.13413</td>\n      <td>POINT (-76.13413 43.03819)</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>MAT221</td>\n      <td>TuTh</td>\n      <td>12:45pm</td>\n      <td>Bowne</td>\n      <td>104</td>\n      <td>43.03674</td>\n      <td>-76.13320</td>\n      <td>POINT (-76.1332 43.03674)</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>WRT206</td>\n      <td>MW</td>\n      <td>9:20am</td>\n      <td>Crouse</td>\n      <td>111</td>\n      <td>43.03852</td>\n      <td>-76.13676</td>\n      <td>POINT (-76.13676 43.03852)</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>COM222</td>\n      <td>TuTh</td>\n      <td>9:20am</td>\n      <td>NH II</td>\n      <td>232</td>\n      <td>43.04020</td>\n      <td>-76.13521</td>\n      <td>POINT (-76.13521 43.0402)</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>IST343</td>\n      <td>MW</td>\n      <td>2:15pm</td>\n      <td>Hinds</td>\n      <td>243</td>\n      <td>43.03834</td>\n      <td>-76.13364</td>\n      <td>POINT (-76.13364 43.03834)</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nWith the GeoDataFrame we can easily add markers to a folium map (compare to the multiple lines of code\nwe had to use above to accomplish the same thing):\n\n::: {#02ce4a05 .cell execution_count=7}\n``` {.python .cell-code}\nschine = (43.03986, -76.13375)\nmap3 = folium.Map(location=schine, zoom_start=17)\nmap_out = gdf.explore(m=map3, marker_type=\"marker\")\nmap_out\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n``````````{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_be18e8c622525a9928163ff799205be7 {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n    \n                    &lt;style&gt;\n                        .foliumtooltip {\n                            \n                        }\n                       .foliumtooltip table{\n                            margin: auto;\n                        }\n                        .foliumtooltip tr{\n                            text-align: left;\n                        }\n                        .foliumtooltip th{\n                            padding: 2px; padding-right: 8px;\n                        }\n                    &lt;/style&gt;\n            \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_be18e8c622525a9928163ff799205be7&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_be18e8c622525a9928163ff799205be7 = L.map(\n                &quot;map_be18e8c622525a9928163ff799205be7&quot;,\n                {\n                    center: [43.03986, -76.13375],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 17,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_a4d7d97f372233194bd122f98f7bfb06 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_a4d7d97f372233194bd122f98f7bfb06.addTo(map_be18e8c622525a9928163ff799205be7);\n        \n    \n        function geo_json_976bf03a97935f118a1372b7e64549e6_styler(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n            }\n        }\n        function geo_json_976bf03a97935f118a1372b7e64549e6_highlighter(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.75};\n            }\n        }\n        function geo_json_976bf03a97935f118a1372b7e64549e6_pointToLayer(feature, latlng) {\n            var opts = {\n};\n            \n            let style = geo_json_976bf03a97935f118a1372b7e64549e6_styler(feature)\n            Object.assign(opts, style)\n            \n            return new L.Marker(latlng, opts)\n        }\n\n        function geo_json_976bf03a97935f118a1372b7e64549e6_onEachFeature(feature, layer) {\n\n            layer.on({\n                mouseout: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                            geo_json_976bf03a97935f118a1372b7e64549e6.resetStyle(e.target);\n                    }\n                },\n                mouseover: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                        const highlightStyle = geo_json_976bf03a97935f118a1372b7e64549e6_highlighter(e.target.feature)\n                        e.target.setStyle(highlightStyle);\n                    }\n                },\n            });\n        };\n        var geo_json_976bf03a97935f118a1372b7e64549e6 = L.geoJson(null, {\n                onEachFeature: geo_json_976bf03a97935f118a1372b7e64549e6_onEachFeature,\n            \n                style: geo_json_976bf03a97935f118a1372b7e64549e6_styler,\n                pointToLayer: geo_json_976bf03a97935f118a1372b7e64549e6_pointToLayer,\n            ...{\n}\n        });\n\n        function geo_json_976bf03a97935f118a1372b7e64549e6_add (data) {\n            geo_json_976bf03a97935f118a1372b7e64549e6\n                .addData(data);\n        }\n            geo_json_976bf03a97935f118a1372b7e64549e6_add({&quot;bbox&quot;: [-76.13676, 43.03674, -76.1332, 43.0402], &quot;features&quot;: [{&quot;bbox&quot;: [-76.13413, 43.03819, -76.13413, 43.03819], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.13413, 43.03819], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;HBC&quot;, &quot;Course&quot;: &quot;IST256&quot;, &quot;Day&quot;: &quot;M&quot;, &quot;Lat&quot;: 43.03819, &quot;Lon&quot;: -76.13413, &quot;Room&quot;: &quot;Gifford&quot;, &quot;Time&quot;: &quot;3:45pm&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-76.1332, 43.03674, -76.1332, 43.03674], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.1332, 43.03674], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;Bowne&quot;, &quot;Course&quot;: &quot;MAT221&quot;, &quot;Day&quot;: &quot;TuTh&quot;, &quot;Lat&quot;: 43.03674, &quot;Lon&quot;: -76.1332, &quot;Room&quot;: &quot;104&quot;, &quot;Time&quot;: &quot;12:45pm&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-76.13676, 43.03852, -76.13676, 43.03852], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.13676, 43.03852], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;Crouse&quot;, &quot;Course&quot;: &quot;WRT206&quot;, &quot;Day&quot;: &quot;MW&quot;, &quot;Lat&quot;: 43.03852, &quot;Lon&quot;: -76.13676, &quot;Room&quot;: &quot;111&quot;, &quot;Time&quot;: &quot;9:20am&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-76.13521, 43.0402, -76.13521, 43.0402], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.13521, 43.0402], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;3&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;NH II&quot;, &quot;Course&quot;: &quot;COM222&quot;, &quot;Day&quot;: &quot;TuTh&quot;, &quot;Lat&quot;: 43.0402, &quot;Lon&quot;: -76.13521, &quot;Room&quot;: &quot;232&quot;, &quot;Time&quot;: &quot;9:20am&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-76.13364, 43.03834, -76.13364, 43.03834], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.13364, 43.03834], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;4&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;Hinds&quot;, &quot;Course&quot;: &quot;IST343&quot;, &quot;Day&quot;: &quot;MW&quot;, &quot;Lat&quot;: 43.03834, &quot;Lon&quot;: -76.13364, &quot;Room&quot;: &quot;243&quot;, &quot;Time&quot;: &quot;2:15pm&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});\n\n        \n    \n    geo_json_976bf03a97935f118a1372b7e64549e6.bindTooltip(\n    function(layer){\n    let div = L.DomUtil.create(&#x27;div&#x27;);\n    \n    let handleObject = feature =&gt; {\n        if (feature === null) {\n            return &#x27;&#x27;;\n        } else if (typeof(feature)==&#x27;object&#x27;) {\n            return JSON.stringify(feature);\n        } else {\n            return feature;\n        }\n    }\n    let fields = [&quot;Course&quot;, &quot;Day&quot;, &quot;Time&quot;, &quot;Building&quot;, &quot;Room&quot;, &quot;Lat&quot;, &quot;Lon&quot;];\n    let aliases = [&quot;Course&quot;, &quot;Day&quot;, &quot;Time&quot;, &quot;Building&quot;, &quot;Room&quot;, &quot;Lat&quot;, &quot;Lon&quot;];\n    let table = &#x27;&lt;table&gt;&#x27; +\n        String(\n        fields.map(\n        (v,i)=&gt;\n        `&lt;tr&gt;\n            &lt;th&gt;${aliases[i]}&lt;/th&gt;\n            \n            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;\n        &lt;/tr&gt;`).join(&#x27;&#x27;))\n    +&#x27;&lt;/table&gt;&#x27;;\n    div.innerHTML=table;\n    \n    return div\n    }\n    ,{\n  &quot;sticky&quot;: true,\n  &quot;className&quot;: &quot;foliumtooltip&quot;,\n});\n                     \n    \n            geo_json_976bf03a97935f118a1372b7e64549e6.addTo(map_be18e8c622525a9928163ff799205be7);\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n``````````\n:::\n:::\n\n\nYou can read more about how to work with GeoDetaFrames [here](https://geopandas.org/en/stable/getting_started/introduction.html).\n\n## Choropleth Maps in Geopandas\n\nA choropleth map is a map that uses shading to represent the value of a variable. The shading can be based on a single value or a range of values.\n\nChoropleths maps require a GeoDataFrame with a geometry column. The geometry column contains the shapes that will be displayed on the map.\n\nFirst, we'll use a *colormap* from matplotlib. A colormap maps a sequence of numerical values to a sequence of colors.\nHere's the list of available colormaps in matplotlib:\n\n::: {#e467b58a .cell execution_count=8}\n``` {.python .cell-code}\nfrom matplotlib import colormaps\nprint(list(colormaps))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['magma', 'inferno', 'plasma', 'viridis', 'cividis', 'twilight', 'twilight_shifted', 'turbo', 'berlin', 'managua', 'vanimo', 'Blues', 'BrBG', 'BuGn', 'BuPu', 'CMRmap', 'GnBu', 'Greens', 'Greys', 'OrRd', 'Oranges', 'PRGn', 'PiYG', 'PuBu', 'PuBuGn', 'PuOr', 'PuRd', 'Purples', 'RdBu', 'RdGy', 'RdPu', 'RdYlBu', 'RdYlGn', 'Reds', 'Spectral', 'Wistia', 'YlGn', 'YlGnBu', 'YlOrBr', 'YlOrRd', 'afmhot', 'autumn', 'binary', 'bone', 'brg', 'bwr', 'cool', 'coolwarm', 'copper', 'cubehelix', 'flag', 'gist_earth', 'gist_gray', 'gist_heat', 'gist_ncar', 'gist_rainbow', 'gist_stern', 'gist_yarg', 'gnuplot', 'gnuplot2', 'gray', 'hot', 'hsv', 'jet', 'nipy_spectral', 'ocean', 'pink', 'prism', 'rainbow', 'seismic', 'spring', 'summer', 'terrain', 'winter', 'Accent', 'Dark2', 'Paired', 'Pastel1', 'Pastel2', 'Set1', 'Set2', 'Set3', 'tab10', 'tab20', 'tab20b', 'tab20c', 'grey', 'gist_grey', 'gist_yerg', 'Grays', 'magma_r', 'inferno_r', 'plasma_r', 'viridis_r', 'cividis_r', 'twilight_r', 'twilight_shifted_r', 'turbo_r', 'berlin_r', 'managua_r', 'vanimo_r', 'Blues_r', 'BrBG_r', 'BuGn_r', 'BuPu_r', 'CMRmap_r', 'GnBu_r', 'Greens_r', 'Greys_r', 'OrRd_r', 'Oranges_r', 'PRGn_r', 'PiYG_r', 'PuBu_r', 'PuBuGn_r', 'PuOr_r', 'PuRd_r', 'Purples_r', 'RdBu_r', 'RdGy_r', 'RdPu_r', 'RdYlBu_r', 'RdYlGn_r', 'Reds_r', 'Spectral_r', 'Wistia_r', 'YlGn_r', 'YlGnBu_r', 'YlOrBr_r', 'YlOrRd_r', 'afmhot_r', 'autumn_r', 'binary_r', 'bone_r', 'brg_r', 'bwr_r', 'cool_r', 'coolwarm_r', 'copper_r', 'cubehelix_r', 'flag_r', 'gist_earth_r', 'gist_gray_r', 'gist_heat_r', 'gist_ncar_r', 'gist_rainbow_r', 'gist_stern_r', 'gist_yarg_r', 'gnuplot_r', 'gnuplot2_r', 'gray_r', 'hot_r', 'hsv_r', 'jet_r', 'nipy_spectral_r', 'ocean_r', 'pink_r', 'prism_r', 'rainbow_r', 'seismic_r', 'spring_r', 'summer_r', 'terrain_r', 'winter_r', 'Accent_r', 'Dark2_r', 'Paired_r', 'Pastel1_r', 'Pastel2_r', 'Set1_r', 'Set2_r', 'Set3_r', 'tab10_r', 'tab20_r', 'tab20b_r', 'tab20c_r', 'grey_r', 'gist_grey_r', 'gist_yerg_r', 'Grays_r']\n```\n:::\n:::\n\n\nYou can see what these look like on the [matplotlib site](https://matplotlib.org/stable/users/explain/colors/colormaps.html).\n\nIn the example below we will use the `inferno` colormap to make a plot of fake population\nnumbers of towns on the island of St. Lucia. To do this, we use the provided GeoJSON\nfile that gives the borders of towns and villages in St. Lucia, [stlucia.geojson](../assets/stlucia.geojson):\n\n::: {#76a04f53 .cell execution_count=9}\n``` {.python .cell-code}\ngdf = gpd.read_file(\"../assets/stlucia.geojson\")\ngdf\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>source</th>\n      <th>id</th>\n      <th>name</th>\n      <th>geometry</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>https://simplemaps.com</td>\n      <td>LC06</td>\n      <td>Gros Islet</td>\n      <td>POLYGON ((-60.97997 14.04352, -60.97606 14.061...</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>https://simplemaps.com</td>\n      <td>LC02</td>\n      <td>Castries</td>\n      <td>POLYGON ((-60.97997 14.04352, -60.96559 14.034...</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>https://simplemaps.com</td>\n      <td>LC01</td>\n      <td>Anse-la-Raye</td>\n      <td>POLYGON ((-61.0266 13.98737, -61.00945 13.9817...</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>https://simplemaps.com</td>\n      <td>LC10</td>\n      <td>Soufri√®re</td>\n      <td>POLYGON ((-60.98063 13.8928, -60.97185 13.8827...</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>https://simplemaps.com</td>\n      <td>LC03</td>\n      <td>Choiseul</td>\n      <td>POLYGON ((-61.0681 13.79218, -61.04956 13.8063...</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>https://simplemaps.com</td>\n      <td>LC07</td>\n      <td>Laborie</td>\n      <td>POLYGON ((-61.01892 13.75625, -61.01203 13.770...</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>https://simplemaps.com</td>\n      <td>LC11</td>\n      <td>Vieux Fort</td>\n      <td>POLYGON ((-60.98158 13.83577, -60.97522 13.839...</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>https://simplemaps.com</td>\n      <td>LC08</td>\n      <td>Micoud</td>\n      <td>POLYGON ((-60.97522 13.83923, -60.96433 13.845...</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>https://simplemaps.com</td>\n      <td>LC09</td>\n      <td>Praslin</td>\n      <td>POLYGON ((-60.96057 13.87901, -60.96057 13.900...</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>https://simplemaps.com</td>\n      <td>LC05</td>\n      <td>Dennery</td>\n      <td>POLYGON ((-60.96057 13.90032, -60.95681 13.927...</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>https://simplemaps.com</td>\n      <td>LC04</td>\n      <td>Dauphin</td>\n      <td>POLYGON ((-60.93559 14.01796, -60.933 14.03692...</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nNow let's illustrate plotting, say, the population of each town. Since this is just for illustrative\npurposes, we'll just create a population column with random numbers. \n\n::: {#c5cff36e .cell execution_count=10}\n``` {.python .cell-code}\nimport numpy as np\ngdf['Population'] = gdf.apply(lambda row: np.random.randint(5000,50000), axis=1)\n```\n:::\n\n\nWe can now create the Choropleth map illustrating our fake population numbers with:\n\n::: {#5eb34226 .cell execution_count=11}\n``` {.python .cell-code}\ngdf.explore(column='Population', cmap='inferno')\n```\n\n::: {.cell-output .cell-output-display execution_count=9}\n``````````{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_3210520b336d791026dea09f2713f1ce {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n    \n                    &lt;style&gt;\n                        .foliumtooltip {\n                            \n                        }\n                       .foliumtooltip table{\n                            margin: auto;\n                        }\n                        .foliumtooltip tr{\n                            text-align: left;\n                        }\n                        .foliumtooltip th{\n                            padding: 2px; padding-right: 8px;\n                        }\n                    &lt;/style&gt;\n            \n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_3210520b336d791026dea09f2713f1ce&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_3210520b336d791026dea09f2713f1ce = L.map(\n                &quot;map_3210520b336d791026dea09f2713f1ce&quot;,\n                {\n                    center: [13.913275584714711, -60.98074296702212],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 10,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n            L.control.scale().addTo(map_3210520b336d791026dea09f2713f1ce);\n\n            \n\n        \n    \n            var tile_layer_1250db3cfd8dd9b185897ff14144c6ca = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_1250db3cfd8dd9b185897ff14144c6ca.addTo(map_3210520b336d791026dea09f2713f1ce);\n        \n    \n            map_3210520b336d791026dea09f2713f1ce.fitBounds(\n                [[13.714667199671691, -61.07852128744509], [14.111883969757729, -60.88296464659914]],\n                {}\n            );\n        \n    \n        function geo_json_cb9bfc3979112c497c7d0c23423eee5c_styler(feature) {\n            switch(feature.id) {\n                case &quot;0&quot;: \n                    return {&quot;color&quot;: &quot;#000004&quot;, &quot;fillColor&quot;: &quot;#000004&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;1&quot;: \n                    return {&quot;color&quot;: &quot;#fb9706&quot;, &quot;fillColor&quot;: &quot;#fb9706&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;2&quot;: \n                    return {&quot;color&quot;: &quot;#fbbc21&quot;, &quot;fillColor&quot;: &quot;#fbbc21&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;3&quot;: \n                    return {&quot;color&quot;: &quot;#c03a51&quot;, &quot;fillColor&quot;: &quot;#c03a51&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;4&quot;: \n                    return {&quot;color&quot;: &quot;#ce4347&quot;, &quot;fillColor&quot;: &quot;#ce4347&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;5&quot;: \n                    return {&quot;color&quot;: &quot;#010106&quot;, &quot;fillColor&quot;: &quot;#010106&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;6&quot;: \n                    return {&quot;color&quot;: &quot;#140b34&quot;, &quot;fillColor&quot;: &quot;#140b34&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;7&quot;: \n                    return {&quot;color&quot;: &quot;#0a0722&quot;, &quot;fillColor&quot;: &quot;#0a0722&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;8&quot;: \n                    return {&quot;color&quot;: &quot;#520e6d&quot;, &quot;fillColor&quot;: &quot;#520e6d&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;10&quot;: \n                    return {&quot;color&quot;: &quot;#d74b3f&quot;, &quot;fillColor&quot;: &quot;#d74b3f&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                default:\n                    return {&quot;color&quot;: &quot;#fcffa4&quot;, &quot;fillColor&quot;: &quot;#fcffa4&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n            }\n        }\n        function geo_json_cb9bfc3979112c497c7d0c23423eee5c_highlighter(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.75};\n            }\n        }\n        function geo_json_cb9bfc3979112c497c7d0c23423eee5c_pointToLayer(feature, latlng) {\n            var opts = {\n  &quot;stroke&quot;: true,\n  &quot;color&quot;: &quot;#3388ff&quot;,\n  &quot;weight&quot;: 3,\n  &quot;opacity&quot;: 1.0,\n  &quot;lineCap&quot;: &quot;round&quot;,\n  &quot;lineJoin&quot;: &quot;round&quot;,\n  &quot;dashArray&quot;: null,\n  &quot;dashOffset&quot;: null,\n  &quot;fill&quot;: true,\n  &quot;fillColor&quot;: &quot;#3388ff&quot;,\n  &quot;fillOpacity&quot;: 0.2,\n  &quot;fillRule&quot;: &quot;evenodd&quot;,\n  &quot;bubblingMouseEvents&quot;: true,\n  &quot;radius&quot;: 2,\n};\n            \n            let style = geo_json_cb9bfc3979112c497c7d0c23423eee5c_styler(feature)\n            Object.assign(opts, style)\n            \n            return new L.CircleMarker(latlng, opts)\n        }\n\n        function geo_json_cb9bfc3979112c497c7d0c23423eee5c_onEachFeature(feature, layer) {\n\n            layer.on({\n                mouseout: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                            geo_json_cb9bfc3979112c497c7d0c23423eee5c.resetStyle(e.target);\n                    }\n                },\n                mouseover: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                        const highlightStyle = geo_json_cb9bfc3979112c497c7d0c23423eee5c_highlighter(e.target.feature)\n                        e.target.setStyle(highlightStyle);\n                    }\n                },\n            });\n        };\n        var geo_json_cb9bfc3979112c497c7d0c23423eee5c = L.geoJson(null, {\n                onEachFeature: geo_json_cb9bfc3979112c497c7d0c23423eee5c_onEachFeature,\n            \n                style: geo_json_cb9bfc3979112c497c7d0c23423eee5c_styler,\n                pointToLayer: geo_json_cb9bfc3979112c497c7d0c23423eee5c_pointToLayer,\n            ...{\n}\n        });\n\n        function geo_json_cb9bfc3979112c497c7d0c23423eee5c_add (data) {\n            geo_json_cb9bfc3979112c497c7d0c23423eee5c\n                .addData(data);\n        }\n            geo_json_cb9bfc3979112c497c7d0c23423eee5c_add({&quot;bbox&quot;: [-61.07852128744509, 13.714667199671691, -60.88296464659914, 14.111883969757729], &quot;features&quot;: [{&quot;bbox&quot;: [-60.97996984865899, 14.017963405195127, -60.901031059483685, 14.111883969757729], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.97996984865899, 14.043524380671208], [-60.97606361571136, 14.061184112880598], [-60.972075964740284, 14.068101156976683], [-60.94762123147301, 14.10228110233217], [-60.93346107574182, 14.111883969757729], [-60.914133275213416, 14.105699066976735], [-60.91860918331479, 14.088446412284911], [-60.91193600498171, 14.079494571931985], [-60.901031059483685, 14.073391085494125], [-60.91545682342176, 14.064494524128554], [-60.927989578617066, 14.053215272042479], [-60.933002657711626, 14.036922485459316], [-60.93558802570042, 14.017963405195127], [-60.95806815149338, 14.021883383565019], [-60.9655877870114, 14.034416018511832], [-60.97996984865899, 14.043524380671208]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Population&quot;: 5816, &quot;__folium_color&quot;: &quot;#000004&quot;, &quot;id&quot;: &quot;LC06&quot;, &quot;name&quot;: &quot;Gros Islet&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.026600710377686, 13.879009988446679, -60.93558802570042, 14.043524380671208], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.97996984865899, 14.043524380671208], [-60.9655877870114, 14.034416018511832], [-60.95806815149338, 14.021883383565019], [-60.93558802570042, 14.017963405195127], [-60.93676247879697, 14.00935044855311], [-60.94052230614067, 13.97927194676369], [-60.94678869220029, 13.954206680392247], [-60.95681486905222, 13.927887731628276], [-60.96057469154169, 13.900315701534577], [-60.96057468732507, 13.879009988446679], [-60.971854154670424, 13.88276983776763], [-60.980627070680484, 13.892796002633068], [-60.98062708106792, 13.91159525012159], [-60.98062707290912, 13.924127881931524], [-60.98188035093091, 13.945433597155597], [-60.984386895162295, 13.965485929912365], [-60.99190655347549, 13.978018863667774], [-61.009452391642974, 13.981778713821216], [-61.026600710377686, 13.9873720730623], [-61.002268043011476, 14.023138870207099], [-60.99705969569022, 14.02716700253527], [-60.98729406682902, 14.032538045982884], [-60.98232987389485, 14.037339478883133], [-60.97996984865899, 14.043524380671208]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;Population&quot;: 37227, &quot;__folium_color&quot;: &quot;#fb9706&quot;, &quot;id&quot;: &quot;LC02&quot;, &quot;name&quot;: &quot;Castries&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.06688390791343, 13.866477357885875, -60.980627070680484, 13.9873720730623], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-61.026600710377686, 13.9873720730623], [-61.009452391642974, 13.981778713821216], [-60.99190655347549, 13.978018863667774], [-60.984386895162295, 13.965485929912365], [-60.98188035093091, 13.945433597155597], [-60.98062707290912, 13.924127881931524], [-60.98062708106792, 13.91159525012159], [-60.980627070680484, 13.892796002633068], [-60.98313363022717, 13.873997056352017], [-60.99065327050962, 13.866477357885875], [-61.01070566406567, 13.871490590325342], [-61.0244916672565, 13.894049385917125], [-61.04078423508858, 13.905328934347565], [-61.05582352512424, 13.909088783887007], [-61.06688390791343, 13.909002861635912], [-61.06493078499751, 13.917303672194924], [-61.0594783173828, 13.931219772644411], [-61.03555253892064, 13.964911212125417], [-61.026600710377686, 13.9873720730623]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {&quot;Population&quot;: 40238, &quot;__folium_color&quot;: &quot;#fbbc21&quot;, &quot;id&quot;: &quot;LC01&quot;, &quot;name&quot;: &quot;Anse-la-Raye&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.07852128744509, 13.792181662094967, -60.96057468732507, 13.909088783887007], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.980627070680484, 13.892796002633068], [-60.971854154670424, 13.88276983776763], [-60.96057468732507, 13.879009988446679], [-60.96057468936946, 13.86898382388502], [-60.96433451327632, 13.845171646377976], [-60.975222824123215, 13.839232496961397], [-60.981577928454854, 13.835766165570293], [-60.99190655446432, 13.830132550939835], [-61.02574493786419, 13.817599621282469], [-61.04955713694187, 13.806320075007667], [-61.06810461758322, 13.792181662094967], [-61.07420813449238, 13.7987327814821], [-61.07811438505948, 13.80630114808245], [-61.071156384269806, 13.821966934292206], [-61.07005775712648, 13.832098848274002], [-61.07115638321751, 13.851792766099573], [-61.072743282872004, 13.858221612369066], [-61.075591598808145, 13.863267290879582], [-61.07811439045722, 13.869615021905199], [-61.07852128744509, 13.879787494640118], [-61.07591712988742, 13.890367046782055], [-61.06688390791343, 13.909002861635912], [-61.05582352512424, 13.909088783887007], [-61.04078423508858, 13.905328934347565], [-61.0244916672565, 13.894049385917125], [-61.01070566406567, 13.871490590325342], [-60.99065327050962, 13.866477357885875], [-60.98313363022717, 13.873997056352017], [-60.980627070680484, 13.892796002633068]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;3&quot;, &quot;properties&quot;: {&quot;Population&quot;: 26713, &quot;__folium_color&quot;: &quot;#c03a51&quot;, &quot;id&quot;: &quot;LC10&quot;, &quot;name&quot;: &quot;Soufri\\u00e8re&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.06810461758322, 13.756246343418445, -60.98094284351656, 13.835766165570293], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-61.06810461758322, 13.792181662094967], [-61.04955713694187, 13.806320075007667], [-61.02574493786419, 13.817599621282469], [-60.99190655446432, 13.830132550939835], [-60.981577928454854, 13.835766165570293], [-60.98094284351656, 13.830799800194693], [-60.98565821782862, 13.827833380056855], [-60.98882296048643, 13.819394074094953], [-61.0011302866414, 13.791966255667063], [-61.012031055548626, 13.770867842450873], [-61.0189227656206, 13.756246343418445], [-61.04816647311292, 13.76732009575197], [-61.064930786352015, 13.786932595026554], [-61.06810461758322, 13.792181662094967]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;4&quot;, &quot;properties&quot;: {&quot;Population&quot;: 28350, &quot;__folium_color&quot;: &quot;#ce4347&quot;, &quot;id&quot;: &quot;LC03&quot;, &quot;name&quot;: &quot;Choiseul&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.0189227656206, 13.730640620444081, -60.96245009767476, 13.830799800194693], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-61.0189227656206, 13.756246343418445], [-61.012031055548626, 13.770867842450873], [-61.0011302866414, 13.791966255667063], [-60.98882296048643, 13.819394074094953], [-60.98565821782862, 13.827833380056855], [-60.98094284351656, 13.830799800194693], [-60.98038364360638, 13.826426778981332], [-60.976867263675004, 13.813416169875591], [-60.9701861272117, 13.790911154727404], [-60.96385665971408, 13.775790945649709], [-60.96280173799647, 13.755395833584942], [-60.96245009767476, 13.741681926030394], [-60.96708776779835, 13.730640620444081], [-60.9733780566766, 13.73899971071873], [-61.0189227656206, 13.756246343418445]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;5&quot;, &quot;properties&quot;: {&quot;Population&quot;: 6226, &quot;__folium_color&quot;: &quot;#010106&quot;, &quot;id&quot;: &quot;LC07&quot;, &quot;name&quot;: &quot;Laborie&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.981577928454854, 13.714667199671691, -60.918039106984565, 13.839232496961397], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.981577928454854, 13.835766165570293], [-60.975222824123215, 13.839232496961397], [-60.961827961134894, 13.82386593585517], [-60.94177559641603, 13.802560526737324], [-60.92924285674984, 13.78877451524633], [-60.918039106984565, 13.774000698987168], [-60.922840949114864, 13.772691136111456], [-60.92711340944503, 13.76992420010928], [-60.93175208081317, 13.760321340042038], [-60.94078528177615, 13.722113291009528], [-60.947010867332935, 13.716294614500596], [-60.95010332941998, 13.714667199671691], [-60.9550675224208, 13.714667199671691], [-60.96708776779835, 13.730640620444081], [-60.96245009767476, 13.741681926030394], [-60.96280173799647, 13.755395833584942], [-60.96385665971408, 13.775790945649709], [-60.9701861272117, 13.790911154727404], [-60.976867263675004, 13.813416169875591], [-60.98038364360638, 13.826426778981332], [-60.98094284351656, 13.830799800194693], [-60.981577928454854, 13.835766165570293]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;6&quot;, &quot;properties&quot;: {&quot;Population&quot;: 9570, &quot;__folium_color&quot;: &quot;#140b34&quot;, &quot;id&quot;: &quot;LC11&quot;, &quot;name&quot;: &quot;Vieux Fort&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.975222824123215, 13.774000698987168, -60.8922012918597, 13.845171646377976], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.975222824123215, 13.839232496961397], [-60.96433451327632, 13.845171646377976], [-60.94302886771425, 13.840158714653315], [-60.91545683680569, 13.832639016740984], [-60.8922012918597, 13.833197210852697], [-60.904611778362735, 13.784247074758182], [-60.90729732364228, 13.777329734613943], [-60.91030839660237, 13.776109098228993], [-60.918039106984565, 13.774000698987168], [-60.92924285674984, 13.78877451524633], [-60.94177559641603, 13.802560526737324], [-60.961827961134894, 13.82386593585517], [-60.975222824123215, 13.839232496961397]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;7&quot;, &quot;properties&quot;: {&quot;Population&quot;: 8269, &quot;__folium_color&quot;: &quot;#0a0722&quot;, &quot;id&quot;: &quot;LC08&quot;, &quot;name&quot;: &quot;Micoud&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.96433451327632, 13.832639016740984, -60.890225349416326, 13.908475010604072], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.96057468732507, 13.879009988446679], [-60.96057469154169, 13.900315701534577], [-60.93926903573513, 13.90407555103225], [-60.921723204649275, 13.897809235362676], [-60.90668392089705, 13.905328934347565], [-60.890225349416326, 13.908475010604072], [-60.89509030841784, 13.87734622133399], [-60.8922012918597, 13.833197210852697], [-60.91545683680569, 13.832639016740984], [-60.94302886771425, 13.840158714653315], [-60.96433451327632, 13.845171646377976], [-60.96057468936946, 13.86898382388502], [-60.96057468732507, 13.879009988446679]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;8&quot;, &quot;properties&quot;: {&quot;Population&quot;: 15581, &quot;__folium_color&quot;: &quot;#520e6d&quot;, &quot;id&quot;: &quot;LC09&quot;, &quot;name&quot;: &quot;Praslin&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.96057469154169, 13.897809235362676, -60.88296464659914, 13.983031796927856], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.96057469154169, 13.900315701534577], [-60.95681486905222, 13.927887731628276], [-60.94678869220029, 13.954206680392247], [-60.94052230614067, 13.97927194676369], [-60.92046993944822, 13.981778713821216], [-60.901670815296086, 13.983031796927856], [-60.88296464659914, 13.980617561533078], [-60.883046022027514, 13.9544130740723], [-60.890225349416326, 13.908475010604072], [-60.90668392089705, 13.905328934347565], [-60.921723204649275, 13.897809235362676], [-60.93926903573513, 13.90407555103225], [-60.96057469154169, 13.900315701534577]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;9&quot;, &quot;properties&quot;: {&quot;Population&quot;: 46448, &quot;__folium_color&quot;: &quot;#fcffa4&quot;, &quot;id&quot;: &quot;LC05&quot;, &quot;name&quot;: &quot;Dennery&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.94052230614067, 13.97927194676369, -60.88296464659914, 14.073391085494125], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.93558802570042, 14.017963405195127], [-60.933002657711626, 14.036922485459316], [-60.927989578617066, 14.053215272042479], [-60.91545682342176, 14.064494524128554], [-60.901031059483685, 14.073391085494125], [-60.89297440211461, 14.06468319263496], [-60.89020749433179, 14.052232273099982], [-60.88678951446872, 14.01007718272342], [-60.88296464659914, 13.980617561533078], [-60.901670815296086, 13.983031796927856], [-60.92046993944822, 13.981778713821216], [-60.94052230614067, 13.97927194676369], [-60.93676247879697, 14.00935044855311], [-60.93558802570042, 14.017963405195127]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;10&quot;, &quot;properties&quot;: {&quot;Population&quot;: 29389, &quot;__folium_color&quot;: &quot;#d74b3f&quot;, &quot;id&quot;: &quot;LC04&quot;, &quot;name&quot;: &quot;Dauphin&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});\n\n        \n    \n    geo_json_cb9bfc3979112c497c7d0c23423eee5c.bindTooltip(\n    function(layer){\n    let div = L.DomUtil.create(&#x27;div&#x27;);\n    \n    let handleObject = feature =&gt; {\n        if (feature === null) {\n            return &#x27;&#x27;;\n        } else if (typeof(feature)==&#x27;object&#x27;) {\n            return JSON.stringify(feature);\n        } else {\n            return feature;\n        }\n    }\n    let fields = [&quot;source&quot;, &quot;id&quot;, &quot;name&quot;, &quot;Population&quot;];\n    let aliases = [&quot;source&quot;, &quot;id&quot;, &quot;name&quot;, &quot;Population&quot;];\n    let table = &#x27;&lt;table&gt;&#x27; +\n        String(\n        fields.map(\n        (v,i)=&gt;\n        `&lt;tr&gt;\n            &lt;th&gt;${aliases[i]}&lt;/th&gt;\n            \n            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;\n        &lt;/tr&gt;`).join(&#x27;&#x27;))\n    +&#x27;&lt;/table&gt;&#x27;;\n    div.innerHTML=table;\n    \n    return div\n    }\n    ,{\n  &quot;sticky&quot;: true,\n  &quot;className&quot;: &quot;foliumtooltip&quot;,\n});\n                     \n    \n            geo_json_cb9bfc3979112c497c7d0c23423eee5c.addTo(map_3210520b336d791026dea09f2713f1ce);\n        \n    \n    var color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e = {};\n\n    \n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.color = d3.scale.threshold()\n              .domain([5816.0, 5897.426853707415, 5978.85370741483, 6060.280561122245, 6141.70741482966, 6223.134268537075, 6304.561122244489, 6385.9879759519035, 6467.4148296593185, 6548.841683366733, 6630.268537074148, 6711.695390781563, 6793.122244488978, 6874.549098196393, 6955.975951903807, 7037.402805611222, 7118.829659318637, 7200.256513026052, 7281.683366733467, 7363.110220440882, 7444.537074148297, 7525.9639278557115, 7607.390781563126, 7688.817635270541, 7770.244488977956, 7851.671342685371, 7933.098196392786, 8014.525050100201, 8095.951903807615, 8177.37875751503, 8258.805611222444, 8340.23246492986, 8421.659318637274, 8503.086172344689, 8584.513026052104, 8665.939879759519, 8747.366733466934, 8828.793587174348, 8910.220440881763, 8991.647294589178, 9073.074148296593, 9154.501002004008, 9235.927855711423, 9317.354709418838, 9398.781563126253, 9480.208416833668, 9561.635270541083, 9643.062124248498, 9724.488977955913, 9805.915831663326, 9887.342685370742, 9968.769539078156, 10050.196392785572, 10131.623246492985, 10213.050100200402, 10294.476953907815, 10375.90380761523, 10457.330661322645, 10538.75751503006, 10620.184368737475, 10701.61122244489, 10783.038076152305, 10864.46492985972, 10945.891783567135, 11027.31863727455, 11108.745490981964, 11190.172344689377, 11271.599198396794, 11353.026052104207, 11434.452905811624, 11515.879759519037, 11597.306613226454, 11678.733466933867, 11760.160320641284, 11841.587174348697, 11923.014028056112, 12004.440881763527, 12085.867735470942, 12167.294589178357, 12248.721442885771, 12330.148296593186, 12411.575150300601, 12493.002004008016, 12574.428857715431, 12655.855711422846, 12737.28256513026, 12818.709418837676, 12900.136272545089, 12981.563126252506, 13062.989979959919, 13144.416833667336, 13225.843687374749, 13307.270541082165, 13388.697394789579, 13470.124248496995, 13551.551102204408, 13632.977955911823, 13714.404809619238, 13795.831663326653, 13877.258517034068, 13958.685370741483, 14040.112224448898, 14121.539078156313, 14202.965931863728, 14284.392785571143, 14365.819639278558, 14447.246492985973, 14528.673346693387, 14610.100200400802, 14691.527054108217, 14772.95390781563, 14854.380761523045, 14935.80761523046, 15017.234468937875, 15098.66132264529, 15180.088176352705, 15261.51503006012, 15342.941883767535, 15424.36873747495, 15505.795591182365, 15587.22244488978, 15668.649298597195, 15750.07615230461, 15831.503006012024, 15912.92985971944, 15994.356713426854, 16075.78356713427, 16157.210420841684, 16238.637274549099, 16320.064128256514, 16401.49098196393, 16482.917835671342, 16564.344689378755, 16645.77154308617, 16727.19839679359, 16808.625250501, 16890.052104208415, 16971.47895791583, 17052.905811623248, 17134.33266533066, 17215.759519038074, 17297.18637274549, 17378.613226452908, 17460.04008016032, 17541.466933867734, 17622.89378757515, 17704.320641282568, 17785.74749498998, 17867.174348697394, 17948.60120240481, 18030.028056112224, 18111.454909819637, 18192.881763527053, 18274.30861723447, 18355.735470941883, 18437.162324649296, 18518.589178356713, 18600.01603206413, 18681.442885771543, 18762.869739478956, 18844.296593186373, 18925.72344689379, 19007.150300601203, 19088.577154308616, 19170.004008016032, 19251.43086172345, 19332.857715430862, 19414.284569138275, 19495.711422845692, 19577.13827655311, 19658.56513026052, 19739.991983967935, 19821.418837675352, 19902.845691382765, 19984.272545090178, 20065.699398797595, 20147.12625250501, 20228.553106212425, 20309.979959919838, 20391.406813627254, 20472.83366733467, 20554.260521042084, 20635.687374749497, 20717.114228456914, 20798.54108216433, 20879.967935871744, 20961.394789579157, 21042.821643286574, 21124.24849699399, 21205.675350701404, 21287.102204408817, 21368.529058116234, 21449.955911823647, 21531.38276553106, 21612.809619238476, 21694.236472945893, 21775.663326653306, 21857.09018036072, 21938.517034068136, 22019.943887775553, 22101.370741482966, 22182.79759519038, 22264.224448897796, 22345.65130260521, 22427.078156312626, 22508.50501002004, 22589.931863727455, 22671.35871743487, 22752.785571142285, 22834.2124248497, 22915.639278557115, 22997.06613226453, 23078.492985971945, 23159.919839679358, 23241.346693386775, 23322.773547094188, 23404.200400801605, 23485.627254509018, 23567.054108216435, 23648.480961923848, 23729.90781563126, 23811.334669338677, 23892.76152304609, 23974.188376753507, 24055.61523046092, 24137.042084168337, 24218.46893787575, 24299.895791583167, 24381.32264529058, 24462.749498997997, 24544.17635270541, 24625.603206412827, 24707.03006012024, 24788.456913827657, 24869.88376753507, 24951.310621242486, 25032.7374749499, 25114.164328657316, 25195.59118236473, 25277.018036072146, 25358.44488977956, 25439.871743486972, 25521.29859719439, 25602.725450901802, 25684.15230460922, 25765.579158316632, 25847.00601202405, 25928.43286573146, 26009.85971943888, 26091.28657314629, 26172.71342685371, 26254.14028056112, 26335.56713426854, 26416.99398797595, 26498.420841683368, 26579.84769539078, 26661.274549098198, 26742.70140280561, 26824.128256513028, 26905.55511022044, 26986.981963927854, 27068.40881763527, 27149.835671342684, 27231.2625250501, 27312.689378757514, 27394.11623246493, 27475.543086172343, 27556.96993987976, 27638.396793587173, 27719.82364729459, 27801.250501002003, 27882.67735470942, 27964.104208416833, 28045.53106212425, 28126.957915831663, 28208.38476953908, 28289.811623246493, 28371.23847695391, 28452.665330661323, 28534.09218436874, 28615.519038076152, 28696.945891783565, 28778.372745490982, 28859.799599198395, 28941.226452905812, 29022.653306613225, 29104.080160320642, 29185.507014028055, 29266.93386773547, 29348.360721442885, 29429.7875751503, 29511.214428857715, 29592.64128256513, 29674.068136272545, 29755.49498997996, 29836.921843687374, 29918.34869739479, 29999.775551102204, 30081.20240480962, 30162.629258517034, 30244.056112224447, 30325.482965931864, 30406.909819639277, 30488.336673346694, 30569.763527054107, 30651.190380761524, 30732.617234468937, 30814.044088176353, 30895.470941883766, 30976.897795591183, 31058.324649298596, 31139.751503006013, 31221.178356713426, 31302.605210420843, 31384.032064128256, 31465.458917835673, 31546.885771543086, 31628.312625250503, 31709.739478957916, 31791.166332665332, 31872.593186372746, 31954.02004008016, 32035.446893787575, 32116.87374749499, 32198.300601202405, 32279.72745490982, 32361.154308617235, 32442.581162324648, 32524.008016032065, 32605.434869739478, 32686.861723446895, 32768.28857715431, 32849.715430861725, 32931.14228456914, 33012.56913827655, 33093.99599198397, 33175.422845691384, 33256.849699398794, 33338.27655310622, 33419.70340681363, 33501.13026052104, 33582.55711422846, 33663.98396793587, 33745.41082164329, 33826.837675350704, 33908.26452905811, 33989.69138276553, 34071.11823647295, 34152.545090180356, 34233.97194388778, 34315.39879759519, 34396.825651302606, 34478.25250501002, 34559.67935871743, 34641.10621242485, 34722.533066132266, 34803.959919839675, 34885.3867735471, 34966.81362725451, 35048.240480961926, 35129.66733466934, 35211.09418837675, 35292.52104208417, 35373.947895791585, 35455.374749498995, 35536.80160320641, 35618.22845691383, 35699.65531062124, 35781.08216432866, 35862.50901803607, 35943.93587174349, 36025.362725450905, 36106.789579158314, 36188.21643286573, 36269.64328657315, 36351.07014028056, 36432.49699398798, 36513.92384769539, 36595.35070140281, 36676.777555110224, 36758.20440881763, 36839.63126252505, 36921.05811623247, 37002.48496993988, 37083.91182364729, 37165.33867735471, 37246.76553106212, 37328.19238476954, 37409.61923847695, 37491.04609218437, 37572.47294589179, 37653.899799599196, 37735.32665330661, 37816.75350701403, 37898.18036072144, 37979.60721442886, 38061.03406813627, 38142.46092184369, 38223.887775551106, 38305.314629258515, 38386.74148296593, 38468.16833667335, 38549.59519038076, 38631.022044088175, 38712.44889779559, 38793.87575150301, 38875.30260521042, 38956.729458917835, 39038.15631262525, 39119.58316633267, 39201.01002004008, 39282.436873747494, 39363.86372745491, 39445.29058116233, 39526.71743486974, 39608.144288577154, 39689.57114228457, 39770.99799599199, 39852.4248496994, 39933.85170340681, 40015.27855711423, 40096.70541082164, 40178.13226452906, 40259.55911823647, 40340.98597194389, 40422.4128256513, 40503.839679358716, 40585.26653306613, 40666.69338677355, 40748.12024048096, 40829.547094188376, 40910.97394789579, 40992.40080160321, 41073.82765531062, 41155.254509018036, 41236.68136272545, 41318.10821643287, 41399.53507014028, 41480.961923847695, 41562.38877755511, 41643.81563126252, 41725.24248496994, 41806.669338677355, 41888.09619238477, 41969.52304609218, 42050.9498997996, 42132.376753507015, 42213.80360721443, 42295.23046092184, 42376.65731462926, 42458.084168336674, 42539.51102204409, 42620.9378757515, 42702.36472945892, 42783.791583166334, 42865.21843687375, 42946.64529058116, 43028.07214428858, 43109.498997995994, 43190.92585170341, 43272.35270541082, 43353.77955911824, 43435.20641282565, 43516.63326653306, 43598.06012024048, 43679.486973947896, 43760.91382765531, 43842.34068136272, 43923.76753507014, 44005.194388777556, 44086.62124248497, 44168.04809619238, 44249.4749498998, 44330.901803607216, 44412.32865731463, 44493.75551102204, 44575.18236472946, 44656.609218436875, 44738.03607214429, 44819.4629258517, 44900.88977955912, 44982.316633266535, 45063.743486973945, 45145.17034068136, 45226.59719438878, 45308.024048096195, 45389.450901803604, 45470.87775551102, 45552.30460921844, 45633.731462925854, 45715.158316633264, 45796.58517034068, 45878.0120240481, 45959.438877755514, 46040.86573146292, 46122.29258517034, 46203.71943887776, 46285.146292585174, 46366.57314629258, 46448.0])\n              .range([&#x27;#000004ff&#x27;, &#x27;#000004ff&#x27;, &#x27;#010005ff&#x27;, &#x27;#010005ff&#x27;, &#x27;#010106ff&#x27;, &#x27;#010107ff&#x27;, &#x27;#010108ff&#x27;, &#x27;#010109ff&#x27;, &#x27;#02010aff&#x27;, &#x27;#02010bff&#x27;, &#x27;#02020cff&#x27;, &#x27;#02020dff&#x27;, &#x27;#02020eff&#x27;, &#x27;#02020fff&#x27;, &#x27;#030210ff&#x27;, &#x27;#030211ff&#x27;, &#x27;#040312ff&#x27;, &#x27;#040313ff&#x27;, &#x27;#040314ff&#x27;, &#x27;#040316ff&#x27;, &#x27;#050417ff&#x27;, &#x27;#050418ff&#x27;, &#x27;#060419ff&#x27;, &#x27;#06041aff&#x27;, &#x27;#07051bff&#x27;, &#x27;#07051cff&#x27;, &#x27;#08051dff&#x27;, &#x27;#08051eff&#x27;, &#x27;#090620ff&#x27;, &#x27;#090621ff&#x27;, &#x27;#0a0722ff&#x27;, &#x27;#0a0723ff&#x27;, &#x27;#0b0724ff&#x27;, &#x27;#0b0725ff&#x27;, &#x27;#0c0827ff&#x27;, &#x27;#0c0828ff&#x27;, &#x27;#0d0829ff&#x27;, &#x27;#0d082aff&#x27;, &#x27;#0e092cff&#x27;, &#x27;#0f092dff&#x27;, &#x27;#10092eff&#x27;, &#x27;#110930ff&#x27;, &#x27;#110a31ff&#x27;, &#x27;#120a32ff&#x27;, &#x27;#130a33ff&#x27;, &#x27;#140b34ff&#x27;, &#x27;#140b35ff&#x27;, &#x27;#150b37ff&#x27;, &#x27;#150b38ff&#x27;, &#x27;#160b39ff&#x27;, &#x27;#170b3aff&#x27;, &#x27;#180c3cff&#x27;, &#x27;#180c3dff&#x27;, &#x27;#190c3eff&#x27;, &#x27;#1a0c40ff&#x27;, &#x27;#1b0c41ff&#x27;, &#x27;#1b0c42ff&#x27;, &#x27;#1c0c43ff&#x27;, &#x27;#1d0c44ff&#x27;, &#x27;#1e0c45ff&#x27;, &#x27;#1e0c47ff&#x27;, &#x27;#1f0c48ff&#x27;, &#x27;#200c49ff&#x27;, &#x27;#210c4aff&#x27;, &#x27;#220c4bff&#x27;, &#x27;#230c4cff&#x27;, &#x27;#230c4eff&#x27;, &#x27;#240c4fff&#x27;, &#x27;#250c50ff&#x27;, &#x27;#260b51ff&#x27;, &#x27;#270b52ff&#x27;, &#x27;#280b53ff&#x27;, &#x27;#280b54ff&#x27;, &#x27;#290b55ff&#x27;, &#x27;#2a0b56ff&#x27;, &#x27;#2b0b57ff&#x27;, &#x27;#2c0b59ff&#x27;, &#x27;#2d0a5aff&#x27;, &#x27;#2e0a5bff&#x27;, &#x27;#2f0a5bff&#x27;, &#x27;#300a5cff&#x27;, &#x27;#310a5dff&#x27;, &#x27;#320a5eff&#x27;, &#x27;#330a5eff&#x27;, &#x27;#340a5fff&#x27;, &#x27;#350960ff&#x27;, &#x27;#360961ff&#x27;, &#x27;#370961ff&#x27;, &#x27;#380962ff&#x27;, &#x27;#380962ff&#x27;, &#x27;#390963ff&#x27;, &#x27;#3a0963ff&#x27;, &#x27;#3b0964ff&#x27;, &#x27;#3c0964ff&#x27;, &#x27;#3d0965ff&#x27;, &#x27;#3d0965ff&#x27;, &#x27;#3e0966ff&#x27;, &#x27;#3f0966ff&#x27;, &#x27;#400a67ff&#x27;, &#x27;#410a67ff&#x27;, &#x27;#420a68ff&#x27;, &#x27;#430a68ff&#x27;, &#x27;#440a68ff&#x27;, &#x27;#440a69ff&#x27;, &#x27;#450a69ff&#x27;, &#x27;#460a6aff&#x27;, &#x27;#470b6aff&#x27;, &#x27;#480b6aff&#x27;, &#x27;#490b6aff&#x27;, &#x27;#490b6bff&#x27;, &#x27;#4a0c6bff&#x27;, &#x27;#4b0c6bff&#x27;, &#x27;#4c0c6bff&#x27;, &#x27;#4d0c6cff&#x27;, &#x27;#4d0d6cff&#x27;, &#x27;#4e0d6cff&#x27;, &#x27;#4f0d6cff&#x27;, &#x27;#500d6cff&#x27;, &#x27;#510e6cff&#x27;, &#x27;#520e6dff&#x27;, &#x27;#520e6dff&#x27;, &#x27;#530e6dff&#x27;, &#x27;#540f6dff&#x27;, &#x27;#550f6dff&#x27;, &#x27;#560f6dff&#x27;, &#x27;#570f6eff&#x27;, &#x27;#58106eff&#x27;, &#x27;#59106eff&#x27;, &#x27;#59106eff&#x27;, &#x27;#5a106eff&#x27;, &#x27;#5b116eff&#x27;, &#x27;#5c126eff&#x27;, &#x27;#5c126eff&#x27;, &#x27;#5d126eff&#x27;, &#x27;#5e126eff&#x27;, &#x27;#5f136eff&#x27;, &#x27;#60136eff&#x27;, &#x27;#61136eff&#x27;, &#x27;#61136eff&#x27;, &#x27;#62146eff&#x27;, &#x27;#63146eff&#x27;, &#x27;#64156eff&#x27;, &#x27;#64156eff&#x27;, &#x27;#65156eff&#x27;, &#x27;#66156eff&#x27;, &#x27;#67166eff&#x27;, &#x27;#68166eff&#x27;, &#x27;#69166eff&#x27;, &#x27;#6a166eff&#x27;, &#x27;#6a176eff&#x27;, &#x27;#6b176eff&#x27;, &#x27;#6c186eff&#x27;, &#x27;#6d186eff&#x27;, &#x27;#6d186eff&#x27;, &#x27;#6e186eff&#x27;, &#x27;#6f196eff&#x27;, &#x27;#70196eff&#x27;, &#x27;#71196eff&#x27;, &#x27;#72196eff&#x27;, &#x27;#721a6eff&#x27;, &#x27;#731a6eff&#x27;, &#x27;#741a6eff&#x27;, &#x27;#751a6eff&#x27;, &#x27;#761b6eff&#x27;, &#x27;#771b6dff&#x27;, &#x27;#771c6dff&#x27;, &#x27;#781c6dff&#x27;, &#x27;#791c6dff&#x27;, &#x27;#7a1c6dff&#x27;, &#x27;#7b1d6dff&#x27;, &#x27;#7c1d6dff&#x27;, &#x27;#7c1d6dff&#x27;, &#x27;#7d1e6dff&#x27;, &#x27;#7e1e6dff&#x27;, &#x27;#7f1e6cff&#x27;, &#x27;#7f1e6cff&#x27;, &#x27;#801f6cff&#x27;, &#x27;#811f6cff&#x27;, &#x27;#82206cff&#x27;, &#x27;#83206bff&#x27;, &#x27;#84206bff&#x27;, &#x27;#85206bff&#x27;, &#x27;#85216bff&#x27;, &#x27;#86216bff&#x27;, &#x27;#87216bff&#x27;, &#x27;#88216aff&#x27;, &#x27;#88226aff&#x27;, &#x27;#89226aff&#x27;, &#x27;#8a226aff&#x27;, &#x27;#8b2269ff&#x27;, &#x27;#8c2369ff&#x27;, &#x27;#8d2369ff&#x27;, &#x27;#8d2369ff&#x27;, &#x27;#8e2369ff&#x27;, &#x27;#8f2469ff&#x27;, &#x27;#902468ff&#x27;, &#x27;#902568ff&#x27;, &#x27;#912568ff&#x27;, &#x27;#922568ff&#x27;, &#x27;#932567ff&#x27;, &#x27;#932667ff&#x27;, &#x27;#952667ff&#x27;, &#x27;#962667ff&#x27;, &#x27;#972666ff&#x27;, &#x27;#972766ff&#x27;, &#x27;#982766ff&#x27;, &#x27;#992766ff&#x27;, &#x27;#9a2765ff&#x27;, &#x27;#9a2865ff&#x27;, &#x27;#9b2864ff&#x27;, &#x27;#9c2964ff&#x27;, &#x27;#9d2964ff&#x27;, &#x27;#9e2964ff&#x27;, &#x27;#9f2a63ff&#x27;, &#x27;#9f2a63ff&#x27;, &#x27;#a02a63ff&#x27;, &#x27;#a12a63ff&#x27;, &#x27;#a22b62ff&#x27;, &#x27;#a32b61ff&#x27;, &#x27;#a32c61ff&#x27;, &#x27;#a42c60ff&#x27;, &#x27;#a52c60ff&#x27;, &#x27;#a62c60ff&#x27;, &#x27;#a62d60ff&#x27;, &#x27;#a72d5fff&#x27;, &#x27;#a82e5fff&#x27;, &#x27;#a92e5eff&#x27;, &#x27;#a92e5eff&#x27;, &#x27;#aa2e5eff&#x27;, &#x27;#ab2f5eff&#x27;, &#x27;#ac2f5dff&#x27;, &#x27;#ad305dff&#x27;, &#x27;#ae305cff&#x27;, &#x27;#ae305cff&#x27;, &#x27;#af305bff&#x27;, &#x27;#b0315bff&#x27;, &#x27;#b1315aff&#x27;, &#x27;#b1325aff&#x27;, &#x27;#b2325aff&#x27;, &#x27;#b3325aff&#x27;, &#x27;#b43259ff&#x27;, &#x27;#b53359ff&#x27;, &#x27;#b63358ff&#x27;, &#x27;#b63458ff&#x27;, &#x27;#b73457ff&#x27;, &#x27;#b83557ff&#x27;, &#x27;#b93556ff&#x27;, &#x27;#b93556ff&#x27;, &#x27;#ba3555ff&#x27;, &#x27;#bb3655ff&#x27;, &#x27;#bc3654ff&#x27;, &#x27;#bd3754ff&#x27;, &#x27;#bd3753ff&#x27;, &#x27;#be3853ff&#x27;, &#x27;#bf3952ff&#x27;, &#x27;#c03952ff&#x27;, &#x27;#c03a51ff&#x27;, &#x27;#c13a50ff&#x27;, &#x27;#c13a50ff&#x27;, &#x27;#c23a4fff&#x27;, &#x27;#c33b4fff&#x27;, &#x27;#c43b4eff&#x27;, &#x27;#c43c4eff&#x27;, &#x27;#c53c4dff&#x27;, &#x27;#c63d4dff&#x27;, &#x27;#c73d4cff&#x27;, &#x27;#c73e4cff&#x27;, &#x27;#c83e4bff&#x27;, &#x27;#c83f4bff&#x27;, &#x27;#c93f4aff&#x27;, &#x27;#ca404aff&#x27;, &#x27;#cb4049ff&#x27;, &#x27;#cb4149ff&#x27;, &#x27;#cc4148ff&#x27;, &#x27;#cc4248ff&#x27;, &#x27;#cd4247ff&#x27;, &#x27;#ce4347ff&#x27;, &#x27;#cf4346ff&#x27;, &#x27;#cf4446ff&#x27;, &#x27;#d04445ff&#x27;, &#x27;#d04545ff&#x27;, &#x27;#d24544ff&#x27;, &#x27;#d24644ff&#x27;, &#x27;#d34643ff&#x27;, &#x27;#d34743ff&#x27;, &#x27;#d44742ff&#x27;, &#x27;#d44842ff&#x27;, &#x27;#d54941ff&#x27;, &#x27;#d64a40ff&#x27;, &#x27;#d74a3fff&#x27;, &#x27;#d84b3fff&#x27;, &#x27;#d84c3eff&#x27;, &#x27;#d94c3eff&#x27;, &#x27;#d94d3dff&#x27;, &#x27;#da4d3cff&#x27;, &#x27;#da4e3cff&#x27;, &#x27;#db4e3bff&#x27;, &#x27;#db4f3bff&#x27;, &#x27;#dc503aff&#x27;, &#x27;#dd513aff&#x27;, &#x27;#de5139ff&#x27;, &#x27;#de5238ff&#x27;, &#x27;#df5237ff&#x27;, &#x27;#df5337ff&#x27;, &#x27;#e05436ff&#x27;, &#x27;#e05536ff&#x27;, &#x27;#e15535ff&#x27;, &#x27;#e15635ff&#x27;, &#x27;#e25634ff&#x27;, &#x27;#e25734ff&#x27;, &#x27;#e35833ff&#x27;, &#x27;#e35933ff&#x27;, &#x27;#e45932ff&#x27;, &#x27;#e45a31ff&#x27;, &#x27;#e55b30ff&#x27;, &#x27;#e55c30ff&#x27;, &#x27;#e65c2fff&#x27;, &#x27;#e65d2fff&#x27;, &#x27;#e75d2eff&#x27;, &#x27;#e75e2eff&#x27;, &#x27;#e85f2dff&#x27;, &#x27;#e8602dff&#x27;, &#x27;#e9602cff&#x27;, &#x27;#e9612bff&#x27;, &#x27;#ea622aff&#x27;, &#x27;#eb632aff&#x27;, &#x27;#eb6329ff&#x27;, &#x27;#eb6429ff&#x27;, &#x27;#eb6528ff&#x27;, &#x27;#ec6627ff&#x27;, &#x27;#ec6726ff&#x27;, &#x27;#ed6726ff&#x27;, &#x27;#ed6825ff&#x27;, &#x27;#ee6924ff&#x27;, &#x27;#ee6a24ff&#x27;, &#x27;#ef6a23ff&#x27;, &#x27;#ef6b23ff&#x27;, &#x27;#ef6c22ff&#x27;, &#x27;#ef6d21ff&#x27;, &#x27;#f06e20ff&#x27;, &#x27;#f06f20ff&#x27;, &#x27;#f16f1fff&#x27;, &#x27;#f1701fff&#x27;, &#x27;#f1721eff&#x27;, &#x27;#f1731dff&#x27;, &#x27;#f2731cff&#x27;, &#x27;#f2741cff&#x27;, &#x27;#f3751bff&#x27;, &#x27;#f3761bff&#x27;, &#x27;#f3771aff&#x27;, &#x27;#f37819ff&#x27;, &#x27;#f47818ff&#x27;, &#x27;#f47918ff&#x27;, &#x27;#f57a17ff&#x27;, &#x27;#f57b17ff&#x27;, &#x27;#f57c16ff&#x27;, &#x27;#f57d15ff&#x27;, &#x27;#f67d14ff&#x27;, &#x27;#f67e14ff&#x27;, &#x27;#f67f13ff&#x27;, &#x27;#f68013ff&#x27;, &#x27;#f78112ff&#x27;, &#x27;#f78212ff&#x27;, &#x27;#f78311ff&#x27;, &#x27;#f78410ff&#x27;, &#x27;#f8850fff&#x27;, &#x27;#f8850fff&#x27;, &#x27;#f8860eff&#x27;, &#x27;#f8870dff&#x27;, &#x27;#f8880cff&#x27;, &#x27;#f9890bff&#x27;, &#x27;#f98a0bff&#x27;, &#x27;#f98b0aff&#x27;, &#x27;#f98c0aff&#x27;, &#x27;#f98c09ff&#x27;, &#x27;#f98d09ff&#x27;, &#x27;#fa8e08ff&#x27;, &#x27;#fa8f08ff&#x27;, &#x27;#fa9007ff&#x27;, &#x27;#fa9107ff&#x27;, &#x27;#fa9207ff&#x27;, &#x27;#fa9307ff&#x27;, &#x27;#fb9506ff&#x27;, &#x27;#fb9606ff&#x27;, &#x27;#fb9606ff&#x27;, &#x27;#fb9706ff&#x27;, &#x27;#fb9806ff&#x27;, &#x27;#fb9906ff&#x27;, &#x27;#fb9a06ff&#x27;, &#x27;#fb9b06ff&#x27;, &#x27;#fb9c06ff&#x27;, &#x27;#fb9d06ff&#x27;, &#x27;#fc9e07ff&#x27;, &#x27;#fc9f07ff&#x27;, &#x27;#fca007ff&#x27;, &#x27;#fca107ff&#x27;, &#x27;#fca208ff&#x27;, &#x27;#fca308ff&#x27;, &#x27;#fca409ff&#x27;, &#x27;#fca509ff&#x27;, &#x27;#fca60aff&#x27;, &#x27;#fca60bff&#x27;, &#x27;#fca70cff&#x27;, &#x27;#fca80cff&#x27;, &#x27;#fca90dff&#x27;, &#x27;#fcaa0eff&#x27;, &#x27;#fcab10ff&#x27;, &#x27;#fcac11ff&#x27;, &#x27;#fcad11ff&#x27;, &#x27;#fcae12ff&#x27;, &#x27;#fcaf13ff&#x27;, &#x27;#fcb014ff&#x27;, &#x27;#fcb115ff&#x27;, &#x27;#fcb216ff&#x27;, &#x27;#fcb317ff&#x27;, &#x27;#fcb418ff&#x27;, &#x27;#fcb519ff&#x27;, &#x27;#fbb61aff&#x27;, &#x27;#fbb71bff&#x27;, &#x27;#fbb81dff&#x27;, &#x27;#fbb91eff&#x27;, &#x27;#fbbb1fff&#x27;, &#x27;#fbbc20ff&#x27;, &#x27;#fbbd21ff&#x27;, &#x27;#fbbe22ff&#x27;, &#x27;#fbbf23ff&#x27;, &#x27;#fbc025ff&#x27;, &#x27;#fac126ff&#x27;, &#x27;#fac227ff&#x27;, &#x27;#fac328ff&#x27;, &#x27;#fac429ff&#x27;, &#x27;#fac52aff&#x27;, &#x27;#fac62cff&#x27;, &#x27;#fac72dff&#x27;, &#x27;#fac72eff&#x27;, &#x27;#f9c830ff&#x27;, &#x27;#f9c931ff&#x27;, &#x27;#f9ca33ff&#x27;, &#x27;#f9cb34ff&#x27;, &#x27;#f9cc35ff&#x27;, &#x27;#f9cd36ff&#x27;, &#x27;#f8ce38ff&#x27;, &#x27;#f8cf39ff&#x27;, &#x27;#f8d03bff&#x27;, &#x27;#f8d13cff&#x27;, &#x27;#f7d23eff&#x27;, &#x27;#f7d33fff&#x27;, &#x27;#f7d441ff&#x27;, &#x27;#f7d543ff&#x27;, &#x27;#f6d644ff&#x27;, &#x27;#f6d746ff&#x27;, &#x27;#f6d847ff&#x27;, &#x27;#f5d949ff&#x27;, &#x27;#f5da4aff&#x27;, &#x27;#f5db4cff&#x27;, &#x27;#f5dc4dff&#x27;, &#x27;#f4dd4fff&#x27;, &#x27;#f4de51ff&#x27;, &#x27;#f4df53ff&#x27;, &#x27;#f4e055ff&#x27;, &#x27;#f4e256ff&#x27;, &#x27;#f4e358ff&#x27;, &#x27;#f3e45aff&#x27;, &#x27;#f3e55cff&#x27;, &#x27;#f3e65dff&#x27;, &#x27;#f3e65fff&#x27;, &#x27;#f2e761ff&#x27;, &#x27;#f2e863ff&#x27;, &#x27;#f2e966ff&#x27;, &#x27;#f2ea68ff&#x27;, &#x27;#f2eb6aff&#x27;, &#x27;#f2ec6cff&#x27;, &#x27;#f1ed6eff&#x27;, &#x27;#f1ed70ff&#x27;, &#x27;#f1ee72ff&#x27;, &#x27;#f1ef74ff&#x27;, &#x27;#f1f076ff&#x27;, &#x27;#f1f178ff&#x27;, &#x27;#f2f27aff&#x27;, &#x27;#f2f27cff&#x27;, &#x27;#f2f37eff&#x27;, &#x27;#f2f481ff&#x27;, &#x27;#f3f583ff&#x27;, &#x27;#f3f585ff&#x27;, &#x27;#f3f687ff&#x27;, &#x27;#f3f689ff&#x27;, &#x27;#f4f78bff&#x27;, &#x27;#f4f88eff&#x27;, &#x27;#f5f990ff&#x27;, &#x27;#f5f992ff&#x27;, &#x27;#f6fa94ff&#x27;, &#x27;#f6fa96ff&#x27;, &#x27;#f7fb98ff&#x27;, &#x27;#f8fb9aff&#x27;, &#x27;#f9fc9bff&#x27;, &#x27;#f9fc9dff&#x27;, &#x27;#fafd9fff&#x27;, &#x27;#fafda1ff&#x27;, &#x27;#fbfea3ff&#x27;, &#x27;#fcffa4ff&#x27;]);\n    \n\n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.x = d3.scale.linear()\n              .domain([5816.0, 46448.0])\n              .range([0, 450 - 50]);\n\n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.legend = L.control({position: &#x27;topright&#x27;});\n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.legend.onAdd = function (map) {var div = L.DomUtil.create(&#x27;div&#x27;, &#x27;legend&#x27;); return div};\n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.legend.addTo(map_3210520b336d791026dea09f2713f1ce);\n\n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.xAxis = d3.svg.axis()\n        .scale(color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.x)\n        .orient(&quot;top&quot;)\n        .tickSize(1)\n        .tickValues([5816.0, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 9958.870588235295, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 14101.741176470588, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 18244.61176470588, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 22387.482352941177, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 26530.352941176472, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 30673.223529411764, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 34816.09411764706, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 38958.964705882354, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 43101.83529411765, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;]);\n\n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.svg = d3.select(&quot;.legend.leaflet-control&quot;).append(&quot;svg&quot;)\n        .attr(&quot;id&quot;, &#x27;legend&#x27;)\n        .attr(&quot;width&quot;, 450)\n        .attr(&quot;height&quot;, 40);\n\n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.g = color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.svg.append(&quot;g&quot;)\n        .attr(&quot;class&quot;, &quot;key&quot;)\n        .attr(&quot;fill&quot;, &quot;black&quot;)\n        .attr(&quot;transform&quot;, &quot;translate(25,16)&quot;);\n\n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.g.selectAll(&quot;rect&quot;)\n        .data(color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.color.range().map(function(d, i) {\n          return {\n            x0: i ? color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.x(color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.color.domain()[i - 1]) : color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.x.range()[0],\n            x1: i &lt; color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.color.domain().length ? color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.x(color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.color.domain()[i]) : color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.x.range()[1],\n            z: d\n          };\n        }))\n      .enter().append(&quot;rect&quot;)\n        .attr(&quot;height&quot;, 40 - 30)\n        .attr(&quot;x&quot;, function(d) { return d.x0; })\n        .attr(&quot;width&quot;, function(d) { return d.x1 - d.x0; })\n        .style(&quot;fill&quot;, function(d) { return d.z; });\n\n    color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.g.call(color_map_9c1df4f9c3b6f36aa4a7dfc4cc53024e.xAxis).append(&quot;text&quot;)\n        .attr(&quot;class&quot;, &quot;caption&quot;)\n        .attr(&quot;y&quot;, 21)\n        .attr(&quot;fill&quot;, &quot;black&quot;)\n        .text(&quot;Population&quot;);\n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n``````````\n:::\n:::\n\n\n:::: {.callout-caution appearance=\"simple\" icon=\"false\"}\n### Code Challenge 4.2\n\nThe following CSV file contains US unemployment data from October, 2012: \n\nhttps://raw.githubusercontent.com/wrobstory/vincent/master/examples/data/US_Unemployment_Oct2012.csv\n\nThis GeoJSON file contains the geometry information about US states: [us-states.geojson](../assets/us-states.geojson).\n\nUse these files to create a choropleth map of the unemployment data by state.\n\n1. Load the unemployment data as a Pandas DataFrame.\n2. Load the states' geometry data into geopandas.\n3. Merge the data on a common key.\n4. Explore with geopandas!\n\nTo initially center map, use the latitude and longitude of the continental US,\nwhich is `39.8333333,-98.585522`.\n\n::: {.callout-caution collapse=\"true\" appearance=\"simple\" icon=\"false\"}\n#### Solution\n\n::: {#f5c58e90 .cell execution_count=12}\n``` {.python .cell-code}\nimport folium\nimport pandas as pd\nimport geopandas as gpd\n\nCENTER_US = (39.8333333,-98.585522)\nu_df = pd.read_csv('https://raw.githubusercontent.com/wrobstory/vincent/master/examples/data/US_Unemployment_Oct2012.csv')\nstate_geojson = '../assets/us-states.geojson'\ngeo = gpd.read_file(state_geojson)\ncombined = pd.merge(geo, u_df, left_on='id', right_on='State')\nmp = folium.Map(location=CENTER_US, zoom_start=4)\nout_map = combined.explore(m=mp, column='Unemployment', cmap='YlGn', legend=True)\n```\n:::\n\n\n:::\n::::\n\n###  Geopandas Choropleth Maps in streamlit.\n\nIf you plan to use `GeoDataFrame.explore()` then you will need to call `folium_static()` from the `streamlit_folium` module to display the map in Streamlit.\nHere's an example:\n\n::: {#75741772 .cell execution_count=13}\n``` {.python .cell-code}\nfrom numpy import random\nimport geopandas as gpd\nimport pandas as pd\nimport streamlit as st\nimport streamlit_folium as sf\nimport folium\n\nst.title('Streamlit Geopandas Examples')\nst.caption('This is a simple example of how to use Streamlit to create visualizations with Geopandas')\n\n# Load the GeoPandas data\nst.write(\"## Saint Lucia Choropleth\")\ngdf = gpd.read_file(\"./6-viz/data/stlucia.geojson\")\ngdf['Amount'] = gdf.apply(lambda row: random.randint(50,275), axis=1)\nst.write(gdf)\n\nsf.folium_static(gdf.explore(gdf['Amount']))\n\nwards_df = gpd.read_file(\"https://raw.githubusercontent.com/mafudge/datasets/refs/heads/master/city-of-syracuse/wards.geojson\")\nwards_df['amount'] = wards_df.apply(lambda row: random.randint(1,50), axis=1)\n\nst.write('## City of Syracuse Wards - Choropleth')\nst.write(wards_df)\nsf.folium_static(wards_df.explore(wards_df['amount']))\n\nstlucia_df = pd.read_csv(\"https://raw.githubusercontent.com/mafudge/datasets/refs/heads/master/st-lucia/parishes.csv\")\nstlucia_df['Amount'] = stlucia_df.apply(lambda row: random.randint(50,500), axis=1)\n\n\nclassesdf = pd.read_csv(\"https://raw.githubusercontent.com/mafudge/datasets/master/delimited/class-schedule.csv\")\ngdf = gpd.GeoDataFrame(classesdf, geometry=gpd.points_from_xy(classesdf['Lon'], classesdf['Lat']))\nst.write(gdf)\nschine = (43.03986, -76.13375)\nm = folium.Map(location=schine, zoom_start=17)\nmout = gdf.explore(popup=\"Course\",lat=\"Lat\", lon=\"Lon\", m=m, marker_type=\"marker\")\nsf.folium_static(mout)\n```\n:::\n\n\n",
    "supporting": [
      "visualization-4_files"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}