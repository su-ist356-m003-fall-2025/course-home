{
  "hash": "c5cfeb951db1436fc105f58b688da743",
  "result": {
    "engine": "jupyter",
    "markdown": "---\ntitle: '3. Creating visualizations with maps'\njupyter: python3\nresources:\n    - assets/final_cuse_parking_violations.csv\n    - assets/stlucia.geojson\n    - assets/us-states.geojson\n---\n\n\nIn this tutorial you will learn how to create maps with the `folium` and `geopandas`\npackages.\n\n::: {.callout-note}\nTo run this tutorial you will need `geopandas` and `folium` installed. You will also\nneed `streamlit-folium` to use folium with Streamlit. To install these packages,\nopen a Terminal, activate your `ist356` conda environment, and run:\n\n```{bash}\npip install folium geopandas streamlit-folium\n```\n:::\n\n## Mapping\n\nMapping is a powerful way to visualize data. You can place points on a map, draw lines, and shade areas.\n\n## Map Visualizations with Folium\n\nTo create map visualizations, we will use [folium](https://python-visualization.github.io/folium/latest/),\nwhich is a Python wrapper for the Leaflet.js library. \n\nFolium uses [OpenStreetMap](https://www.openstreetmap.org/) for drawing maps.\nIt is a free/open source alternative to a service like Google Maps.\n\n::: {#baf10f15 .cell execution_count=1}\n``` {.python .cell-code}\nimport folium\nJMA = (43.0362, -76.1363)\nmap1 = folium.Map(location=JMA, zoom_start=18)\njma_marker = folium.Marker(JMA, popup='JMA Wireless Dome', tooltip=\"JMA\").add_to(map1)\nmap1\n```\n\n::: {.cell-output .cell-output-display execution_count=1}\n``````````````````{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_5a288f2e732b2a96c01f62b4785b372c {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_5a288f2e732b2a96c01f62b4785b372c&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_5a288f2e732b2a96c01f62b4785b372c = L.map(\n                &quot;map_5a288f2e732b2a96c01f62b4785b372c&quot;,\n                {\n                    center: [43.0362, -76.1363],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 18,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_f13c8e8e98c50647f5146a7b615d759e = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_f13c8e8e98c50647f5146a7b615d759e.addTo(map_5a288f2e732b2a96c01f62b4785b372c);\n        \n    \n            var marker_1e245c0fc9faf55648d6c2afb4deaf6a = L.marker(\n                [43.0362, -76.1363],\n                {\n}\n            ).addTo(map_5a288f2e732b2a96c01f62b4785b372c);\n        \n    \n        var popup_e4fc1cf1e04698be45ac1303876ac050 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_68458c80cf236faea54c48dfa300a743 = $(`&lt;div id=&quot;html_68458c80cf236faea54c48dfa300a743&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;JMA Wireless Dome&lt;/div&gt;`)[0];\n                popup_e4fc1cf1e04698be45ac1303876ac050.setContent(html_68458c80cf236faea54c48dfa300a743);\n            \n        \n\n        marker_1e245c0fc9faf55648d6c2afb4deaf6a.bindPopup(popup_e4fc1cf1e04698be45ac1303876ac050)\n        ;\n\n        \n    \n    \n            marker_1e245c0fc9faf55648d6c2afb4deaf6a.bindTooltip(\n                `&lt;div&gt;\n                     JMA\n                 &lt;/div&gt;`,\n                {\n  &quot;sticky&quot;: true,\n}\n            );\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n``````````````````\n:::\n:::\n\n\n::: {.callout-note}\n# Don't name maps `map`\nNotice in the above block we named the map that we created `map1`. You may be tempted\nto name the map `map` instead. It's perfectly fine for you to do so, however, `map` is\nalso the name of a Python in-built function. The [map](https://docs.python.org/3/library/functions.html#map)\nfunction is used to apply a function to a list of values. If you name an instance\nof a map `map` in your code, you will overwrite the `map` function. This means that you will not\nbe able to use the map function in the rest of your code! Even if you don't use the\n`map` function often, you may find that you want to use it at some point in the future.\nFor this reason, *it's best not to name map instances `map`.* Call them something else,\nlike `map1`, `mp`, etc.\n:::\n\n### Folium and Streamlit\n\nTo display folium maps to display in Streamlit, you need to use the `streamlit_folium` module.\n\nThis module has two functions: \n\n- `folium_static` is used to display the map only.\n- `st_folium` is use to display the map and return data while the user interacts with the map.\n\nHere's an example:\n\n::: {#a3eff257 .cell execution_count=2}\n``` {.python .cell-code}\nimport folium\nimport streamlit as st\nimport pandas as pd\n\nimport streamlit_folium as sf\n\n\nst.title('Streamlit Folium Example')\nJMA = (43.0362, -76.1363)\nHINDS = (43.0382, -76.1333)\nm1 = folium.Map(location=JMA, zoom_start=16)\nfolium.Marker(JMA, popup=\"JMA Wireless Dome\", tooltip=\"JMA\", icon=folium.Icon(color=\"red\")\n).add_to(m1)\nfolium.Marker(HINDS, popup=\"iSchool\", tooltip=\"Hinds Hall\", icon=folium.Icon(color=\"blue\")\n).add_to(m1)\n\nst.write('### Folium Map And Data')\nst_data = sf.st_folium(m1, width=725)\nst.write(st_data)\n\nm2 = folium.Map(location=JMA, zoom_start=16)\nfolium.Marker(JMA, popup=\"JMA Wireless Dome\", tooltip=\"JMA\", icon=folium.Icon(color=\"red\")\n).add_to(m2)\nfolium.Marker(HINDS, popup=\"iSchool\", tooltip=\"Hinds Hall\", icon=folium.Icon(color=\"blue\")\n).add_to(m2)\n\nst.write('### Folium Map Only')\nsf.folium_static(m2, width=725)\n```\n:::\n\n\n### Map Markers Colors and Icons\n\nThrough the `icon` named argument you can assign an icon to the popup. You must create a `folium.Icon()` to assign a custom icon. There are three named arguments:\n\n`color=` the color of the marker\n`icon_color=` the color of the icon on the marker\n`icon=` the name of the icon.\n\n\nValid colors are: `['red', 'blue', 'green', 'purple', 'orange', 'darkred', 'lightred', 'beige', 'darkblue', 'darkgreen', 'cadetblue', 'darkpurple', 'white', 'pink', 'lightblue', 'lightgreen', 'gray', 'black', 'lightgray']`\n\nValid icons can be found here: [https://fontawesome.com/v4/icons/](https://fontawesome.com/v4/icons/)\nYour mileage may vary here as not all the icons listed are available.\n\n### Mapping a dataframe\n\nTo map a dataframe:\n\n1. we need coordinates\n2. we need to use loop over the data, creating a marker for each row\n\nHere's an example using a dataframe that contains locations of various classes:\n\n::: {#d87ba1d7 .cell execution_count=3}\n``` {.python .cell-code}\nimport pandas as pd\nclassesdf = pd.read_csv(\"https://raw.githubusercontent.com/mafudge/datasets/master/delimited/class-schedule.csv\")\nclassesdf.head()\n```\n\n::: {.cell-output .cell-output-display execution_count=2}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Course</th>\n      <th>Day</th>\n      <th>Time</th>\n      <th>Building</th>\n      <th>Room</th>\n      <th>Lat</th>\n      <th>Lon</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>IST256</td>\n      <td>M</td>\n      <td>3:45pm</td>\n      <td>HBC</td>\n      <td>Gifford</td>\n      <td>43.03819</td>\n      <td>-76.13413</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>MAT221</td>\n      <td>TuTh</td>\n      <td>12:45pm</td>\n      <td>Bowne</td>\n      <td>104</td>\n      <td>43.03674</td>\n      <td>-76.13320</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>WRT206</td>\n      <td>MW</td>\n      <td>9:20am</td>\n      <td>Crouse</td>\n      <td>111</td>\n      <td>43.03852</td>\n      <td>-76.13676</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>COM222</td>\n      <td>TuTh</td>\n      <td>9:20am</td>\n      <td>NH II</td>\n      <td>232</td>\n      <td>43.04020</td>\n      <td>-76.13521</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>IST343</td>\n      <td>MW</td>\n      <td>2:15pm</td>\n      <td>Hinds</td>\n      <td>243</td>\n      <td>43.03834</td>\n      <td>-76.13364</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nLet's put a marker on the map showing the location of each class:\n\n::: {#f5eebeaf .cell execution_count=4}\n``` {.python .cell-code}\nschine = (43.03986, -76.13375)\nmap2 = folium.Map(location=schine, zoom_start=17)\n\nfor index, row in classesdf.iterrows():\n    text = f\"{row['Course']} {row['Day']} {row['Time']} {row['Building']}\"\n    dd = (row['Lat'], row['Lon'])\n    if row['Day'] == \"TuTh\":\n        markercolor = 'orange'\n    else:\n        markercolor = 'darkblue'\n    marker = folium.Marker(location=dd, popup=text, icon = folium.Icon(color = markercolor, icon=\"globe\"))\n    marker.add_to(map2)\nmap2\n```\n\n::: {.cell-output .cell-output-display execution_count=3}\n```{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_cd0fab2a2a9da8fb837494fcef1bb5d1 {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_cd0fab2a2a9da8fb837494fcef1bb5d1&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_cd0fab2a2a9da8fb837494fcef1bb5d1 = L.map(\n                &quot;map_cd0fab2a2a9da8fb837494fcef1bb5d1&quot;,\n                {\n                    center: [43.03986, -76.13375],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 17,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_38f673f692d8617af6d3c6db73c1c522 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_38f673f692d8617af6d3c6db73c1c522.addTo(map_cd0fab2a2a9da8fb837494fcef1bb5d1);\n        \n    \n            var marker_33494998c0d668dd11278abb79a06e42 = L.marker(\n                [43.03819, -76.13413],\n                {\n}\n            ).addTo(map_cd0fab2a2a9da8fb837494fcef1bb5d1);\n        \n    \n            var icon_300fde04bb32f7c75c4daa9a1523c845 = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;darkblue&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_6e17f7bafd3bbd6fb09d7b7ff97dbc3b = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_1ad3ba1011e38d6d7d863479ed63e9e9 = $(`&lt;div id=&quot;html_1ad3ba1011e38d6d7d863479ed63e9e9&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;IST256 M 3:45pm HBC&lt;/div&gt;`)[0];\n                popup_6e17f7bafd3bbd6fb09d7b7ff97dbc3b.setContent(html_1ad3ba1011e38d6d7d863479ed63e9e9);\n            \n        \n\n        marker_33494998c0d668dd11278abb79a06e42.bindPopup(popup_6e17f7bafd3bbd6fb09d7b7ff97dbc3b)\n        ;\n\n        \n    \n    \n                marker_33494998c0d668dd11278abb79a06e42.setIcon(icon_300fde04bb32f7c75c4daa9a1523c845);\n            \n    \n            var marker_ab286624a583cdcb42893371e648e1e7 = L.marker(\n                [43.03674, -76.1332],\n                {\n}\n            ).addTo(map_cd0fab2a2a9da8fb837494fcef1bb5d1);\n        \n    \n            var icon_479be08512e3901cdb8c31c6526b2f98 = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;orange&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_c4d5e3d6c5dd835cb541d1e5cd29a877 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_2e8ee853d7d4b1d9ca302c713ca56e20 = $(`&lt;div id=&quot;html_2e8ee853d7d4b1d9ca302c713ca56e20&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;MAT221 TuTh 12:45pm Bowne&lt;/div&gt;`)[0];\n                popup_c4d5e3d6c5dd835cb541d1e5cd29a877.setContent(html_2e8ee853d7d4b1d9ca302c713ca56e20);\n            \n        \n\n        marker_ab286624a583cdcb42893371e648e1e7.bindPopup(popup_c4d5e3d6c5dd835cb541d1e5cd29a877)\n        ;\n\n        \n    \n    \n                marker_ab286624a583cdcb42893371e648e1e7.setIcon(icon_479be08512e3901cdb8c31c6526b2f98);\n            \n    \n            var marker_610c3f5b457e23ca298e19878cde19f1 = L.marker(\n                [43.03852, -76.13676],\n                {\n}\n            ).addTo(map_cd0fab2a2a9da8fb837494fcef1bb5d1);\n        \n    \n            var icon_3c3f01957ae90a074b97fc92729a75f1 = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;darkblue&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_5407ddf65603b729569bf4f49cef3927 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_5471f29a9198c78e9351f951266a689d = $(`&lt;div id=&quot;html_5471f29a9198c78e9351f951266a689d&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;WRT206 MW 9:20am Crouse&lt;/div&gt;`)[0];\n                popup_5407ddf65603b729569bf4f49cef3927.setContent(html_5471f29a9198c78e9351f951266a689d);\n            \n        \n\n        marker_610c3f5b457e23ca298e19878cde19f1.bindPopup(popup_5407ddf65603b729569bf4f49cef3927)\n        ;\n\n        \n    \n    \n                marker_610c3f5b457e23ca298e19878cde19f1.setIcon(icon_3c3f01957ae90a074b97fc92729a75f1);\n            \n    \n            var marker_57987ac780720b71e58e07a1da01d42f = L.marker(\n                [43.0402, -76.13521],\n                {\n}\n            ).addTo(map_cd0fab2a2a9da8fb837494fcef1bb5d1);\n        \n    \n            var icon_0c860b549c72270c7fdcdb44297a2a80 = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;orange&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_83a24495eb1200daf2a5307184b33f76 = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_b7939477f8268870cf64de87a6d8f441 = $(`&lt;div id=&quot;html_b7939477f8268870cf64de87a6d8f441&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;COM222 TuTh 9:20am NH II&lt;/div&gt;`)[0];\n                popup_83a24495eb1200daf2a5307184b33f76.setContent(html_b7939477f8268870cf64de87a6d8f441);\n            \n        \n\n        marker_57987ac780720b71e58e07a1da01d42f.bindPopup(popup_83a24495eb1200daf2a5307184b33f76)\n        ;\n\n        \n    \n    \n                marker_57987ac780720b71e58e07a1da01d42f.setIcon(icon_0c860b549c72270c7fdcdb44297a2a80);\n            \n    \n            var marker_12d15f4b7c8459a99d53cbffbf765fe1 = L.marker(\n                [43.03834, -76.13364],\n                {\n}\n            ).addTo(map_cd0fab2a2a9da8fb837494fcef1bb5d1);\n        \n    \n            var icon_7d6e35fff9bf9929b680a4632c2e292c = L.AwesomeMarkers.icon(\n                {\n  &quot;markerColor&quot;: &quot;darkblue&quot;,\n  &quot;iconColor&quot;: &quot;white&quot;,\n  &quot;icon&quot;: &quot;globe&quot;,\n  &quot;prefix&quot;: &quot;glyphicon&quot;,\n  &quot;extraClasses&quot;: &quot;fa-rotate-0&quot;,\n}\n            );\n        \n    \n        var popup_9561aa582b095993d4a663f474889cae = L.popup({\n  &quot;maxWidth&quot;: &quot;100%&quot;,\n});\n\n        \n            \n                var html_cf00d4f598048473b81223f4aa0a187b = $(`&lt;div id=&quot;html_cf00d4f598048473b81223f4aa0a187b&quot; style=&quot;width: 100.0%; height: 100.0%;&quot;&gt;IST343 MW 2:15pm Hinds&lt;/div&gt;`)[0];\n                popup_9561aa582b095993d4a663f474889cae.setContent(html_cf00d4f598048473b81223f4aa0a187b);\n            \n        \n\n        marker_12d15f4b7c8459a99d53cbffbf765fe1.bindPopup(popup_9561aa582b095993d4a663f474889cae)\n        ;\n\n        \n    \n    \n                marker_12d15f4b7c8459a99d53cbffbf765fe1.setIcon(icon_7d6e35fff9bf9929b680a4632c2e292c);\n            \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n```\n:::\n:::\n\n\n:::: {.callout-caution appearance=\"simple\" icon=\"false\"}\n### Code Challenge 4.1\n\nStreamlit version of Parkmagic!\n\nThe file\n\n[https://su-ist356-m003-fall-2025.github.io/course-home/assets/final_cuse_parking_violations.csv](../assets/final_cuse_parking_violations.csv)\n\ncontains a list parking tickets in Syracuse, along with their locations.\n\nWrite a Streamlit app that will load `final_cuse_parking_violations.csv` and create a map of the parking violations in Syracuse.\n\nSteps to take:\n\n- drop rows without a latitude and longitude\n- provide a dropdown to select the status of the violation\n- place pins on the map with the street name and the violation description\n- color code the pins based on day of the week \n- to make the map more readable take a random sample of 50 rows from the dataframe (you can do this with the DataFrame's\n[sample](https://pandas.pydata.org/docs/reference/api/pandas.DataFrame.sample.html) method).\n\n::: {.callout-caution collapse=\"true\" appearance=\"simple\" icon=\"false\"}\n#### Solution\n\n::: {#48fa01c1 .cell execution_count=5}\n``` {.python .cell-code}\nimport pandas as pd\nimport streamlit as st\nimport folium\nimport streamlit_folium as sf\n\n\ndays  = {\n    'Sunday': 'red',\n    'Monday': 'orange',\n    'Tuesday': 'beige',\n    'Wednesday': 'green',\n    'Thursday': 'blue',\n    'Friday': 'purple',\n    'Saturday': 'gray'\n}\n\nst.title('Streamlit Park magic')\n\nmp = folium.Map(location=[43.0481, -76.1474], zoom_start=15)\ndf = pd.read_csv('https://su-ist356-m003-fall-2025.github.io/course-home/assets/final_cuse_parking_violations.csv')\ndf_dropped = df.dropna()\nstatus = df_dropped['status'].unique()\n\nstatus = st.selectbox('Select ticket status: ', status)\n\ndf_filtered = df_dropped[df_dropped['status'] == status]\n\ndf_sample = df_filtered.sample(50)\n\nfor i, row in df_sample.iterrows():\n    lat, lon = row['coords'].strip(\"(\").strip(\")\").split(',') \n    lat = float(lat.replace(\"'\", \"\"))\n    lon = float(lon.replace(\"'\", \"\"))\n    color = days[row['dayofweek']]\n    folium.Marker((lat, lon), popup=row['location'], tooltip=row['location'], icon=folium.Icon(color=color)).add_to(mp)\n\nsf.folium_static(mp)\n```\n:::\n\n\n:::\n::::\n\n## Geopandas\n\n[Geopandas](https://geopandas.org/) is a library that extends the Pandas library to work with geospatial data. It is built on top of the Shapely, Fiona, and Matplotlib libraries.\n\nGeopandas can read and write data in many formats, including shapefiles, GeoJSON, and PostGIS. It can also display data on a map.\n\nA Pandas DataFrame can be wrapped in a Geopandas' [GeoDataFrame](https://geopandas.org/en/stable/docs/reference/geodataframe.html).\nThis adds a `geometry` column to the dataframe that contains information about the shape of the object.\nThe geometry can be a POINT, LINE, or PLOYGON. The GeoDataFrame also has an\n[explore](https://geopandas.org/en/stable/docs/reference/api/geopandas.GeoDataFrame.explore.html)\nmethod to display the data on a map.  \n\nHere is an example of a GeoDataFrame wrapped around the class-schedule DataFrame we used earlier:\n\n::: {#03666991 .cell execution_count=6}\n``` {.python .cell-code}\nimport geopandas as gpd\nclassesdf = pd.read_csv(\"https://raw.githubusercontent.com/mafudge/datasets/master/delimited/class-schedule.csv\")\ngdf = gpd.GeoDataFrame(classesdf, geometry=gpd.points_from_xy(classesdf['Lon'], classesdf['Lat']))\ngdf\n```\n\n::: {.cell-output .cell-output-display execution_count=4}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>Course</th>\n      <th>Day</th>\n      <th>Time</th>\n      <th>Building</th>\n      <th>Room</th>\n      <th>Lat</th>\n      <th>Lon</th>\n      <th>geometry</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>IST256</td>\n      <td>M</td>\n      <td>3:45pm</td>\n      <td>HBC</td>\n      <td>Gifford</td>\n      <td>43.03819</td>\n      <td>-76.13413</td>\n      <td>POINT (-76.13413 43.03819)</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>MAT221</td>\n      <td>TuTh</td>\n      <td>12:45pm</td>\n      <td>Bowne</td>\n      <td>104</td>\n      <td>43.03674</td>\n      <td>-76.13320</td>\n      <td>POINT (-76.1332 43.03674)</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>WRT206</td>\n      <td>MW</td>\n      <td>9:20am</td>\n      <td>Crouse</td>\n      <td>111</td>\n      <td>43.03852</td>\n      <td>-76.13676</td>\n      <td>POINT (-76.13676 43.03852)</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>COM222</td>\n      <td>TuTh</td>\n      <td>9:20am</td>\n      <td>NH II</td>\n      <td>232</td>\n      <td>43.04020</td>\n      <td>-76.13521</td>\n      <td>POINT (-76.13521 43.0402)</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>IST343</td>\n      <td>MW</td>\n      <td>2:15pm</td>\n      <td>Hinds</td>\n      <td>243</td>\n      <td>43.03834</td>\n      <td>-76.13364</td>\n      <td>POINT (-76.13364 43.03834)</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nWith the GeoDataFrame we can easily add markers to a folium map (compare to the multiple lines of code\nwe had to use above to accomplish the same thing):\n\n::: {#10cb2142 .cell execution_count=7}\n``` {.python .cell-code}\nschine = (43.03986, -76.13375)\nmap3 = folium.Map(location=schine, zoom_start=17)\nmap_out = gdf.explore(m=map3, marker_type=\"marker\")\nmap_out\n```\n\n::: {.cell-output .cell-output-display execution_count=5}\n``````````{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_5bbac0d23e07165916d75d7c8bdfee49 {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n    \n                    &lt;style&gt;\n                        .foliumtooltip {\n                            \n                        }\n                       .foliumtooltip table{\n                            margin: auto;\n                        }\n                        .foliumtooltip tr{\n                            text-align: left;\n                        }\n                        .foliumtooltip th{\n                            padding: 2px; padding-right: 8px;\n                        }\n                    &lt;/style&gt;\n            \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_5bbac0d23e07165916d75d7c8bdfee49&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_5bbac0d23e07165916d75d7c8bdfee49 = L.map(\n                &quot;map_5bbac0d23e07165916d75d7c8bdfee49&quot;,\n                {\n                    center: [43.03986, -76.13375],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 17,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_f7baa8e4acf30b37337999a3eef6db73 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_f7baa8e4acf30b37337999a3eef6db73.addTo(map_5bbac0d23e07165916d75d7c8bdfee49);\n        \n    \n        function geo_json_bd2cafebdf70807140a47eb4cc58cfe8_styler(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n            }\n        }\n        function geo_json_bd2cafebdf70807140a47eb4cc58cfe8_highlighter(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.75};\n            }\n        }\n        function geo_json_bd2cafebdf70807140a47eb4cc58cfe8_pointToLayer(feature, latlng) {\n            var opts = {\n};\n            \n            let style = geo_json_bd2cafebdf70807140a47eb4cc58cfe8_styler(feature)\n            Object.assign(opts, style)\n            \n            return new L.Marker(latlng, opts)\n        }\n\n        function geo_json_bd2cafebdf70807140a47eb4cc58cfe8_onEachFeature(feature, layer) {\n\n            layer.on({\n                mouseout: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                            geo_json_bd2cafebdf70807140a47eb4cc58cfe8.resetStyle(e.target);\n                    }\n                },\n                mouseover: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                        const highlightStyle = geo_json_bd2cafebdf70807140a47eb4cc58cfe8_highlighter(e.target.feature)\n                        e.target.setStyle(highlightStyle);\n                    }\n                },\n            });\n        };\n        var geo_json_bd2cafebdf70807140a47eb4cc58cfe8 = L.geoJson(null, {\n                onEachFeature: geo_json_bd2cafebdf70807140a47eb4cc58cfe8_onEachFeature,\n            \n                style: geo_json_bd2cafebdf70807140a47eb4cc58cfe8_styler,\n                pointToLayer: geo_json_bd2cafebdf70807140a47eb4cc58cfe8_pointToLayer,\n            ...{\n}\n        });\n\n        function geo_json_bd2cafebdf70807140a47eb4cc58cfe8_add (data) {\n            geo_json_bd2cafebdf70807140a47eb4cc58cfe8\n                .addData(data);\n        }\n            geo_json_bd2cafebdf70807140a47eb4cc58cfe8_add({&quot;bbox&quot;: [-76.13676, 43.03674, -76.1332, 43.0402], &quot;features&quot;: [{&quot;bbox&quot;: [-76.13413, 43.03819, -76.13413, 43.03819], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.13413, 43.03819], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;HBC&quot;, &quot;Course&quot;: &quot;IST256&quot;, &quot;Day&quot;: &quot;M&quot;, &quot;Lat&quot;: 43.03819, &quot;Lon&quot;: -76.13413, &quot;Room&quot;: &quot;Gifford&quot;, &quot;Time&quot;: &quot;3:45pm&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-76.1332, 43.03674, -76.1332, 43.03674], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.1332, 43.03674], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;Bowne&quot;, &quot;Course&quot;: &quot;MAT221&quot;, &quot;Day&quot;: &quot;TuTh&quot;, &quot;Lat&quot;: 43.03674, &quot;Lon&quot;: -76.1332, &quot;Room&quot;: &quot;104&quot;, &quot;Time&quot;: &quot;12:45pm&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-76.13676, 43.03852, -76.13676, 43.03852], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.13676, 43.03852], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;Crouse&quot;, &quot;Course&quot;: &quot;WRT206&quot;, &quot;Day&quot;: &quot;MW&quot;, &quot;Lat&quot;: 43.03852, &quot;Lon&quot;: -76.13676, &quot;Room&quot;: &quot;111&quot;, &quot;Time&quot;: &quot;9:20am&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-76.13521, 43.0402, -76.13521, 43.0402], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.13521, 43.0402], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;3&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;NH II&quot;, &quot;Course&quot;: &quot;COM222&quot;, &quot;Day&quot;: &quot;TuTh&quot;, &quot;Lat&quot;: 43.0402, &quot;Lon&quot;: -76.13521, &quot;Room&quot;: &quot;232&quot;, &quot;Time&quot;: &quot;9:20am&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-76.13364, 43.03834, -76.13364, 43.03834], &quot;geometry&quot;: {&quot;coordinates&quot;: [-76.13364, 43.03834], &quot;type&quot;: &quot;Point&quot;}, &quot;id&quot;: &quot;4&quot;, &quot;properties&quot;: {&quot;Building&quot;: &quot;Hinds&quot;, &quot;Course&quot;: &quot;IST343&quot;, &quot;Day&quot;: &quot;MW&quot;, &quot;Lat&quot;: 43.03834, &quot;Lon&quot;: -76.13364, &quot;Room&quot;: &quot;243&quot;, &quot;Time&quot;: &quot;2:15pm&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});\n\n        \n    \n    geo_json_bd2cafebdf70807140a47eb4cc58cfe8.bindTooltip(\n    function(layer){\n    let div = L.DomUtil.create(&#x27;div&#x27;);\n    \n    let handleObject = feature =&gt; {\n        if (feature === null) {\n            return &#x27;&#x27;;\n        } else if (typeof(feature)==&#x27;object&#x27;) {\n            return JSON.stringify(feature);\n        } else {\n            return feature;\n        }\n    }\n    let fields = [&quot;Course&quot;, &quot;Day&quot;, &quot;Time&quot;, &quot;Building&quot;, &quot;Room&quot;, &quot;Lat&quot;, &quot;Lon&quot;];\n    let aliases = [&quot;Course&quot;, &quot;Day&quot;, &quot;Time&quot;, &quot;Building&quot;, &quot;Room&quot;, &quot;Lat&quot;, &quot;Lon&quot;];\n    let table = &#x27;&lt;table&gt;&#x27; +\n        String(\n        fields.map(\n        (v,i)=&gt;\n        `&lt;tr&gt;\n            &lt;th&gt;${aliases[i]}&lt;/th&gt;\n            \n            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;\n        &lt;/tr&gt;`).join(&#x27;&#x27;))\n    +&#x27;&lt;/table&gt;&#x27;;\n    div.innerHTML=table;\n    \n    return div\n    }\n    ,{\n  &quot;sticky&quot;: true,\n  &quot;className&quot;: &quot;foliumtooltip&quot;,\n});\n                     \n    \n            geo_json_bd2cafebdf70807140a47eb4cc58cfe8.addTo(map_5bbac0d23e07165916d75d7c8bdfee49);\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n``````````\n:::\n:::\n\n\nYou can read more about how to work with GeoDetaFrames [here](https://geopandas.org/en/stable/getting_started/introduction.html).\n\n## Choropleth Maps in Geopandas\n\nA choropleth map is a map that uses shading to represent the value of a variable. The shading can be based on a single value or a range of values.\n\nChoropleths maps require a GeoDataFrame with a geometry column. The geometry column contains the shapes that will be displayed on the map.\n\nFirst, we'll use a *colormap* from matplotlib. A colormap maps a sequence of numerical values to a sequence of colors.\nHere's the list of available colormaps in matplotlib:\n\n::: {#e35ed365 .cell execution_count=8}\n``` {.python .cell-code}\nfrom matplotlib import colormaps\nprint(list(colormaps))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n['magma', 'inferno', 'plasma', 'viridis', 'cividis', 'twilight', 'twilight_shifted', 'turbo', 'berlin', 'managua', 'vanimo', 'Blues', 'BrBG', 'BuGn', 'BuPu', 'CMRmap', 'GnBu', 'Greens', 'Greys', 'OrRd', 'Oranges', 'PRGn', 'PiYG', 'PuBu', 'PuBuGn', 'PuOr', 'PuRd', 'Purples', 'RdBu', 'RdGy', 'RdPu', 'RdYlBu', 'RdYlGn', 'Reds', 'Spectral', 'Wistia', 'YlGn', 'YlGnBu', 'YlOrBr', 'YlOrRd', 'afmhot', 'autumn', 'binary', 'bone', 'brg', 'bwr', 'cool', 'coolwarm', 'copper', 'cubehelix', 'flag', 'gist_earth', 'gist_gray', 'gist_heat', 'gist_ncar', 'gist_rainbow', 'gist_stern', 'gist_yarg', 'gnuplot', 'gnuplot2', 'gray', 'hot', 'hsv', 'jet', 'nipy_spectral', 'ocean', 'pink', 'prism', 'rainbow', 'seismic', 'spring', 'summer', 'terrain', 'winter', 'Accent', 'Dark2', 'Paired', 'Pastel1', 'Pastel2', 'Set1', 'Set2', 'Set3', 'tab10', 'tab20', 'tab20b', 'tab20c', 'grey', 'gist_grey', 'gist_yerg', 'Grays', 'magma_r', 'inferno_r', 'plasma_r', 'viridis_r', 'cividis_r', 'twilight_r', 'twilight_shifted_r', 'turbo_r', 'berlin_r', 'managua_r', 'vanimo_r', 'Blues_r', 'BrBG_r', 'BuGn_r', 'BuPu_r', 'CMRmap_r', 'GnBu_r', 'Greens_r', 'Greys_r', 'OrRd_r', 'Oranges_r', 'PRGn_r', 'PiYG_r', 'PuBu_r', 'PuBuGn_r', 'PuOr_r', 'PuRd_r', 'Purples_r', 'RdBu_r', 'RdGy_r', 'RdPu_r', 'RdYlBu_r', 'RdYlGn_r', 'Reds_r', 'Spectral_r', 'Wistia_r', 'YlGn_r', 'YlGnBu_r', 'YlOrBr_r', 'YlOrRd_r', 'afmhot_r', 'autumn_r', 'binary_r', 'bone_r', 'brg_r', 'bwr_r', 'cool_r', 'coolwarm_r', 'copper_r', 'cubehelix_r', 'flag_r', 'gist_earth_r', 'gist_gray_r', 'gist_heat_r', 'gist_ncar_r', 'gist_rainbow_r', 'gist_stern_r', 'gist_yarg_r', 'gnuplot_r', 'gnuplot2_r', 'gray_r', 'hot_r', 'hsv_r', 'jet_r', 'nipy_spectral_r', 'ocean_r', 'pink_r', 'prism_r', 'rainbow_r', 'seismic_r', 'spring_r', 'summer_r', 'terrain_r', 'winter_r', 'Accent_r', 'Dark2_r', 'Paired_r', 'Pastel1_r', 'Pastel2_r', 'Set1_r', 'Set2_r', 'Set3_r', 'tab10_r', 'tab20_r', 'tab20b_r', 'tab20c_r', 'grey_r', 'gist_grey_r', 'gist_yerg_r', 'Grays_r']\n```\n:::\n:::\n\n\nYou can see what these look like on the [matplotlib site](https://matplotlib.org/stable/users/explain/colors/colormaps.html).\n\nIn the example below we will use the `inferno` colormap to make a plot of fake population\nnumbers of towns on the island of St. Lucia. To do this, we'll use the file\n\n[https://su-ist356-m003-fall-2025.github.io/course-home/assets/stlucia.geojson](../assets/stlucia.geojson)\n\nThis is a GeoJSON file that gives the borders of towns and villages in St. Lucia:\n\n::: {#1db91d23 .cell execution_count=9}\n``` {.python .cell-code}\ngdf = gpd.read_file(\"https://su-ist356-m003-fall-2025.github.io/course-home/assets/stlucia.geojson\")\ngdf\n```\n\n::: {.cell-output .cell-output-display execution_count=7}\n```{=html}\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table border=\"1\" class=\"dataframe\">\n  <thead>\n    <tr style=\"text-align: right;\">\n      <th></th>\n      <th>source</th>\n      <th>id</th>\n      <th>name</th>\n      <th>geometry</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr>\n      <th>0</th>\n      <td>https://simplemaps.com</td>\n      <td>LC06</td>\n      <td>Gros Islet</td>\n      <td>POLYGON ((-60.97997 14.04352, -60.97606 14.061...</td>\n    </tr>\n    <tr>\n      <th>1</th>\n      <td>https://simplemaps.com</td>\n      <td>LC02</td>\n      <td>Castries</td>\n      <td>POLYGON ((-60.97997 14.04352, -60.96559 14.034...</td>\n    </tr>\n    <tr>\n      <th>2</th>\n      <td>https://simplemaps.com</td>\n      <td>LC01</td>\n      <td>Anse-la-Raye</td>\n      <td>POLYGON ((-61.0266 13.98737, -61.00945 13.9817...</td>\n    </tr>\n    <tr>\n      <th>3</th>\n      <td>https://simplemaps.com</td>\n      <td>LC10</td>\n      <td>Soufri√®re</td>\n      <td>POLYGON ((-60.98063 13.8928, -60.97185 13.8827...</td>\n    </tr>\n    <tr>\n      <th>4</th>\n      <td>https://simplemaps.com</td>\n      <td>LC03</td>\n      <td>Choiseul</td>\n      <td>POLYGON ((-61.0681 13.79218, -61.04956 13.8063...</td>\n    </tr>\n    <tr>\n      <th>5</th>\n      <td>https://simplemaps.com</td>\n      <td>LC07</td>\n      <td>Laborie</td>\n      <td>POLYGON ((-61.01892 13.75625, -61.01203 13.770...</td>\n    </tr>\n    <tr>\n      <th>6</th>\n      <td>https://simplemaps.com</td>\n      <td>LC11</td>\n      <td>Vieux Fort</td>\n      <td>POLYGON ((-60.98158 13.83577, -60.97522 13.839...</td>\n    </tr>\n    <tr>\n      <th>7</th>\n      <td>https://simplemaps.com</td>\n      <td>LC08</td>\n      <td>Micoud</td>\n      <td>POLYGON ((-60.97522 13.83923, -60.96433 13.845...</td>\n    </tr>\n    <tr>\n      <th>8</th>\n      <td>https://simplemaps.com</td>\n      <td>LC09</td>\n      <td>Praslin</td>\n      <td>POLYGON ((-60.96057 13.87901, -60.96057 13.900...</td>\n    </tr>\n    <tr>\n      <th>9</th>\n      <td>https://simplemaps.com</td>\n      <td>LC05</td>\n      <td>Dennery</td>\n      <td>POLYGON ((-60.96057 13.90032, -60.95681 13.927...</td>\n    </tr>\n    <tr>\n      <th>10</th>\n      <td>https://simplemaps.com</td>\n      <td>LC04</td>\n      <td>Dauphin</td>\n      <td>POLYGON ((-60.93559 14.01796, -60.933 14.03692...</td>\n    </tr>\n  </tbody>\n</table>\n</div>\n```\n:::\n:::\n\n\nNow let's illustrate plotting, say, the population of each town. Since this is just for illustrative\npurposes, we'll just create a population column with random numbers. \n\n::: {#fd2d9b43 .cell execution_count=10}\n``` {.python .cell-code}\nimport numpy as np\ngdf['Population'] = gdf.apply(lambda row: np.random.randint(5000,50000), axis=1)\n```\n:::\n\n\nWe can now create the Choropleth map illustrating our fake population numbers with:\n\n::: {#1c87d837 .cell execution_count=11}\n``` {.python .cell-code}\ngdf.explore(column='Population', cmap='inferno')\n```\n\n::: {.cell-output .cell-output-display execution_count=9}\n``````````{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_dec8c96153017d5050cb025e5be75ddf {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n    \n                    &lt;style&gt;\n                        .foliumtooltip {\n                            \n                        }\n                       .foliumtooltip table{\n                            margin: auto;\n                        }\n                        .foliumtooltip tr{\n                            text-align: left;\n                        }\n                        .foliumtooltip th{\n                            padding: 2px; padding-right: 8px;\n                        }\n                    &lt;/style&gt;\n            \n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js&quot;&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_dec8c96153017d5050cb025e5be75ddf&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_dec8c96153017d5050cb025e5be75ddf = L.map(\n                &quot;map_dec8c96153017d5050cb025e5be75ddf&quot;,\n                {\n                    center: [13.913275584714711, -60.98074296702212],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 10,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n            L.control.scale().addTo(map_dec8c96153017d5050cb025e5be75ddf);\n\n            \n\n        \n    \n            var tile_layer_891764923a24b83136306577f4d67056 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_891764923a24b83136306577f4d67056.addTo(map_dec8c96153017d5050cb025e5be75ddf);\n        \n    \n            map_dec8c96153017d5050cb025e5be75ddf.fitBounds(\n                [[13.714667199671691, -61.07852128744509], [14.111883969757729, -60.88296464659914]],\n                {}\n            );\n        \n    \n        function geo_json_cc5514f9d6c945d0063a8967ab86ffa8_styler(feature) {\n            switch(feature.id) {\n                case &quot;0&quot;: \n                    return {&quot;color&quot;: &quot;#000004&quot;, &quot;fillColor&quot;: &quot;#000004&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;1&quot;: case &quot;8&quot;: \n                    return {&quot;color&quot;: &quot;#8a226a&quot;, &quot;fillColor&quot;: &quot;#8a226a&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;2&quot;: \n                    return {&quot;color&quot;: &quot;#fca60c&quot;, &quot;fillColor&quot;: &quot;#fca60c&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;3&quot;: \n                    return {&quot;color&quot;: &quot;#f8890c&quot;, &quot;fillColor&quot;: &quot;#f8890c&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;4&quot;: \n                    return {&quot;color&quot;: &quot;#fac42a&quot;, &quot;fillColor&quot;: &quot;#fac42a&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;5&quot;: \n                    return {&quot;color&quot;: &quot;#060419&quot;, &quot;fillColor&quot;: &quot;#060419&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;6&quot;: \n                    return {&quot;color&quot;: &quot;#320a5e&quot;, &quot;fillColor&quot;: &quot;#320a5e&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;7&quot;: \n                    return {&quot;color&quot;: &quot;#fcffa4&quot;, &quot;fillColor&quot;: &quot;#fcffa4&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                case &quot;10&quot;: \n                    return {&quot;color&quot;: &quot;#9d2964&quot;, &quot;fillColor&quot;: &quot;#9d2964&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n                default:\n                    return {&quot;color&quot;: &quot;#a02a63&quot;, &quot;fillColor&quot;: &quot;#a02a63&quot;, &quot;fillOpacity&quot;: 0.5, &quot;weight&quot;: 2};\n            }\n        }\n        function geo_json_cc5514f9d6c945d0063a8967ab86ffa8_highlighter(feature) {\n            switch(feature.id) {\n                default:\n                    return {&quot;fillOpacity&quot;: 0.75};\n            }\n        }\n        function geo_json_cc5514f9d6c945d0063a8967ab86ffa8_pointToLayer(feature, latlng) {\n            var opts = {\n  &quot;stroke&quot;: true,\n  &quot;color&quot;: &quot;#3388ff&quot;,\n  &quot;weight&quot;: 3,\n  &quot;opacity&quot;: 1.0,\n  &quot;lineCap&quot;: &quot;round&quot;,\n  &quot;lineJoin&quot;: &quot;round&quot;,\n  &quot;dashArray&quot;: null,\n  &quot;dashOffset&quot;: null,\n  &quot;fill&quot;: true,\n  &quot;fillColor&quot;: &quot;#3388ff&quot;,\n  &quot;fillOpacity&quot;: 0.2,\n  &quot;fillRule&quot;: &quot;evenodd&quot;,\n  &quot;bubblingMouseEvents&quot;: true,\n  &quot;radius&quot;: 2,\n};\n            \n            let style = geo_json_cc5514f9d6c945d0063a8967ab86ffa8_styler(feature)\n            Object.assign(opts, style)\n            \n            return new L.CircleMarker(latlng, opts)\n        }\n\n        function geo_json_cc5514f9d6c945d0063a8967ab86ffa8_onEachFeature(feature, layer) {\n\n            layer.on({\n                mouseout: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                            geo_json_cc5514f9d6c945d0063a8967ab86ffa8.resetStyle(e.target);\n                    }\n                },\n                mouseover: function(e) {\n                    if(typeof e.target.setStyle === &quot;function&quot;){\n                        const highlightStyle = geo_json_cc5514f9d6c945d0063a8967ab86ffa8_highlighter(e.target.feature)\n                        e.target.setStyle(highlightStyle);\n                    }\n                },\n            });\n        };\n        var geo_json_cc5514f9d6c945d0063a8967ab86ffa8 = L.geoJson(null, {\n                onEachFeature: geo_json_cc5514f9d6c945d0063a8967ab86ffa8_onEachFeature,\n            \n                style: geo_json_cc5514f9d6c945d0063a8967ab86ffa8_styler,\n                pointToLayer: geo_json_cc5514f9d6c945d0063a8967ab86ffa8_pointToLayer,\n            ...{\n}\n        });\n\n        function geo_json_cc5514f9d6c945d0063a8967ab86ffa8_add (data) {\n            geo_json_cc5514f9d6c945d0063a8967ab86ffa8\n                .addData(data);\n        }\n            geo_json_cc5514f9d6c945d0063a8967ab86ffa8_add({&quot;bbox&quot;: [-61.07852128744509, 13.714667199671691, -60.88296464659914, 14.111883969757729], &quot;features&quot;: [{&quot;bbox&quot;: [-60.97996984865899, 14.017963405195127, -60.901031059483685, 14.111883969757729], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.97996984865899, 14.043524380671208], [-60.97606361571136, 14.061184112880598], [-60.972075964740284, 14.068101156976683], [-60.94762123147301, 14.10228110233217], [-60.93346107574182, 14.111883969757729], [-60.914133275213416, 14.105699066976735], [-60.91860918331479, 14.088446412284911], [-60.91193600498171, 14.079494571931985], [-60.901031059483685, 14.073391085494125], [-60.91545682342176, 14.064494524128554], [-60.927989578617066, 14.053215272042479], [-60.933002657711626, 14.036922485459316], [-60.93558802570042, 14.017963405195127], [-60.95806815149338, 14.021883383565019], [-60.9655877870114, 14.034416018511832], [-60.97996984865899, 14.043524380671208]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;0&quot;, &quot;properties&quot;: {&quot;Population&quot;: 5189, &quot;__folium_color&quot;: &quot;#000004&quot;, &quot;id&quot;: &quot;LC06&quot;, &quot;name&quot;: &quot;Gros Islet&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.026600710377686, 13.879009988446679, -60.93558802570042, 14.043524380671208], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.97996984865899, 14.043524380671208], [-60.9655877870114, 14.034416018511832], [-60.95806815149338, 14.021883383565019], [-60.93558802570042, 14.017963405195127], [-60.93676247879697, 14.00935044855311], [-60.94052230614067, 13.97927194676369], [-60.94678869220029, 13.954206680392247], [-60.95681486905222, 13.927887731628276], [-60.96057469154169, 13.900315701534577], [-60.96057468732507, 13.879009988446679], [-60.971854154670424, 13.88276983776763], [-60.980627070680484, 13.892796002633068], [-60.98062708106792, 13.91159525012159], [-60.98062707290912, 13.924127881931524], [-60.98188035093091, 13.945433597155597], [-60.984386895162295, 13.965485929912365], [-60.99190655347549, 13.978018863667774], [-61.009452391642974, 13.981778713821216], [-61.026600710377686, 13.9873720730623], [-61.002268043011476, 14.023138870207099], [-60.99705969569022, 14.02716700253527], [-60.98729406682902, 14.032538045982884], [-60.98232987389485, 14.037339478883133], [-60.97996984865899, 14.043524380671208]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;1&quot;, &quot;properties&quot;: {&quot;Population&quot;: 21107, &quot;__folium_color&quot;: &quot;#8a226a&quot;, &quot;id&quot;: &quot;LC02&quot;, &quot;name&quot;: &quot;Castries&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.06688390791343, 13.866477357885875, -60.980627070680484, 13.9873720730623], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-61.026600710377686, 13.9873720730623], [-61.009452391642974, 13.981778713821216], [-60.99190655347549, 13.978018863667774], [-60.984386895162295, 13.965485929912365], [-60.98188035093091, 13.945433597155597], [-60.98062707290912, 13.924127881931524], [-60.98062708106792, 13.91159525012159], [-60.980627070680484, 13.892796002633068], [-60.98313363022717, 13.873997056352017], [-60.99065327050962, 13.866477357885875], [-61.01070566406567, 13.871490590325342], [-61.0244916672565, 13.894049385917125], [-61.04078423508858, 13.905328934347565], [-61.05582352512424, 13.909088783887007], [-61.06688390791343, 13.909002861635912], [-61.06493078499751, 13.917303672194924], [-61.0594783173828, 13.931219772644411], [-61.03555253892064, 13.964911212125417], [-61.026600710377686, 13.9873720730623]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;2&quot;, &quot;properties&quot;: {&quot;Population&quot;: 38856, &quot;__folium_color&quot;: &quot;#fca60c&quot;, &quot;id&quot;: &quot;LC01&quot;, &quot;name&quot;: &quot;Anse-la-Raye&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.07852128744509, 13.792181662094967, -60.96057468732507, 13.909088783887007], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.980627070680484, 13.892796002633068], [-60.971854154670424, 13.88276983776763], [-60.96057468732507, 13.879009988446679], [-60.96057468936946, 13.86898382388502], [-60.96433451327632, 13.845171646377976], [-60.975222824123215, 13.839232496961397], [-60.981577928454854, 13.835766165570293], [-60.99190655446432, 13.830132550939835], [-61.02574493786419, 13.817599621282469], [-61.04955713694187, 13.806320075007667], [-61.06810461758322, 13.792181662094967], [-61.07420813449238, 13.7987327814821], [-61.07811438505948, 13.80630114808245], [-61.071156384269806, 13.821966934292206], [-61.07005775712648, 13.832098848274002], [-61.07115638321751, 13.851792766099573], [-61.072743282872004, 13.858221612369066], [-61.075591598808145, 13.863267290879582], [-61.07811439045722, 13.869615021905199], [-61.07852128744509, 13.879787494640118], [-61.07591712988742, 13.890367046782055], [-61.06688390791343, 13.909002861635912], [-61.05582352512424, 13.909088783887007], [-61.04078423508858, 13.905328934347565], [-61.0244916672565, 13.894049385917125], [-61.01070566406567, 13.871490590325342], [-60.99065327050962, 13.866477357885875], [-60.98313363022717, 13.873997056352017], [-60.980627070680484, 13.892796002633068]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;3&quot;, &quot;properties&quot;: {&quot;Population&quot;: 36256, &quot;__folium_color&quot;: &quot;#f8890c&quot;, &quot;id&quot;: &quot;LC10&quot;, &quot;name&quot;: &quot;Soufri\\u00e8re&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.06810461758322, 13.756246343418445, -60.98094284351656, 13.835766165570293], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-61.06810461758322, 13.792181662094967], [-61.04955713694187, 13.806320075007667], [-61.02574493786419, 13.817599621282469], [-60.99190655446432, 13.830132550939835], [-60.981577928454854, 13.835766165570293], [-60.98094284351656, 13.830799800194693], [-60.98565821782862, 13.827833380056855], [-60.98882296048643, 13.819394074094953], [-61.0011302866414, 13.791966255667063], [-61.012031055548626, 13.770867842450873], [-61.0189227656206, 13.756246343418445], [-61.04816647311292, 13.76732009575197], [-61.064930786352015, 13.786932595026554], [-61.06810461758322, 13.792181662094967]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;4&quot;, &quot;properties&quot;: {&quot;Population&quot;: 41428, &quot;__folium_color&quot;: &quot;#fac42a&quot;, &quot;id&quot;: &quot;LC03&quot;, &quot;name&quot;: &quot;Choiseul&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-61.0189227656206, 13.730640620444081, -60.96245009767476, 13.830799800194693], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-61.0189227656206, 13.756246343418445], [-61.012031055548626, 13.770867842450873], [-61.0011302866414, 13.791966255667063], [-60.98882296048643, 13.819394074094953], [-60.98565821782862, 13.827833380056855], [-60.98094284351656, 13.830799800194693], [-60.98038364360638, 13.826426778981332], [-60.976867263675004, 13.813416169875591], [-60.9701861272117, 13.790911154727404], [-60.96385665971408, 13.775790945649709], [-60.96280173799647, 13.755395833584942], [-60.96245009767476, 13.741681926030394], [-60.96708776779835, 13.730640620444081], [-60.9733780566766, 13.73899971071873], [-61.0189227656206, 13.756246343418445]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;5&quot;, &quot;properties&quot;: {&quot;Population&quot;: 7154, &quot;__folium_color&quot;: &quot;#060419&quot;, &quot;id&quot;: &quot;LC07&quot;, &quot;name&quot;: &quot;Laborie&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.981577928454854, 13.714667199671691, -60.918039106984565, 13.839232496961397], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.981577928454854, 13.835766165570293], [-60.975222824123215, 13.839232496961397], [-60.961827961134894, 13.82386593585517], [-60.94177559641603, 13.802560526737324], [-60.92924285674984, 13.78877451524633], [-60.918039106984565, 13.774000698987168], [-60.922840949114864, 13.772691136111456], [-60.92711340944503, 13.76992420010928], [-60.93175208081317, 13.760321340042038], [-60.94078528177615, 13.722113291009528], [-60.947010867332935, 13.716294614500596], [-60.95010332941998, 13.714667199671691], [-60.9550675224208, 13.714667199671691], [-60.96708776779835, 13.730640620444081], [-60.96245009767476, 13.741681926030394], [-60.96280173799647, 13.755395833584942], [-60.96385665971408, 13.775790945649709], [-60.9701861272117, 13.790911154727404], [-60.976867263675004, 13.813416169875591], [-60.98038364360638, 13.826426778981332], [-60.98094284351656, 13.830799800194693], [-60.981577928454854, 13.835766165570293]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;6&quot;, &quot;properties&quot;: {&quot;Population&quot;: 12154, &quot;__folium_color&quot;: &quot;#320a5e&quot;, &quot;id&quot;: &quot;LC11&quot;, &quot;name&quot;: &quot;Vieux Fort&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.975222824123215, 13.774000698987168, -60.8922012918597, 13.845171646377976], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.975222824123215, 13.839232496961397], [-60.96433451327632, 13.845171646377976], [-60.94302886771425, 13.840158714653315], [-60.91545683680569, 13.832639016740984], [-60.8922012918597, 13.833197210852697], [-60.904611778362735, 13.784247074758182], [-60.90729732364228, 13.777329734613943], [-60.91030839660237, 13.776109098228993], [-60.918039106984565, 13.774000698987168], [-60.92924285674984, 13.78877451524633], [-60.94177559641603, 13.802560526737324], [-60.961827961134894, 13.82386593585517], [-60.975222824123215, 13.839232496961397]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;7&quot;, &quot;properties&quot;: {&quot;Population&quot;: 47226, &quot;__folium_color&quot;: &quot;#fcffa4&quot;, &quot;id&quot;: &quot;LC08&quot;, &quot;name&quot;: &quot;Micoud&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.96433451327632, 13.832639016740984, -60.890225349416326, 13.908475010604072], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.96057468732507, 13.879009988446679], [-60.96057469154169, 13.900315701534577], [-60.93926903573513, 13.90407555103225], [-60.921723204649275, 13.897809235362676], [-60.90668392089705, 13.905328934347565], [-60.890225349416326, 13.908475010604072], [-60.89509030841784, 13.87734622133399], [-60.8922012918597, 13.833197210852697], [-60.91545683680569, 13.832639016740984], [-60.94302886771425, 13.840158714653315], [-60.96433451327632, 13.845171646377976], [-60.96057468936946, 13.86898382388502], [-60.96057468732507, 13.879009988446679]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;8&quot;, &quot;properties&quot;: {&quot;Population&quot;: 21016, &quot;__folium_color&quot;: &quot;#8a226a&quot;, &quot;id&quot;: &quot;LC09&quot;, &quot;name&quot;: &quot;Praslin&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.96057469154169, 13.897809235362676, -60.88296464659914, 13.983031796927856], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.96057469154169, 13.900315701534577], [-60.95681486905222, 13.927887731628276], [-60.94678869220029, 13.954206680392247], [-60.94052230614067, 13.97927194676369], [-60.92046993944822, 13.981778713821216], [-60.901670815296086, 13.983031796927856], [-60.88296464659914, 13.980617561533078], [-60.883046022027514, 13.9544130740723], [-60.890225349416326, 13.908475010604072], [-60.90668392089705, 13.905328934347565], [-60.921723204649275, 13.897809235362676], [-60.93926903573513, 13.90407555103225], [-60.96057469154169, 13.900315701534577]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;9&quot;, &quot;properties&quot;: {&quot;Population&quot;: 23257, &quot;__folium_color&quot;: &quot;#a02a63&quot;, &quot;id&quot;: &quot;LC05&quot;, &quot;name&quot;: &quot;Dennery&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}, {&quot;bbox&quot;: [-60.94052230614067, 13.97927194676369, -60.88296464659914, 14.073391085494125], &quot;geometry&quot;: {&quot;coordinates&quot;: [[[-60.93558802570042, 14.017963405195127], [-60.933002657711626, 14.036922485459316], [-60.927989578617066, 14.053215272042479], [-60.91545682342176, 14.064494524128554], [-60.901031059483685, 14.073391085494125], [-60.89297440211461, 14.06468319263496], [-60.89020749433179, 14.052232273099982], [-60.88678951446872, 14.01007718272342], [-60.88296464659914, 13.980617561533078], [-60.901670815296086, 13.983031796927856], [-60.92046993944822, 13.981778713821216], [-60.94052230614067, 13.97927194676369], [-60.93676247879697, 14.00935044855311], [-60.93558802570042, 14.017963405195127]]], &quot;type&quot;: &quot;Polygon&quot;}, &quot;id&quot;: &quot;10&quot;, &quot;properties&quot;: {&quot;Population&quot;: 23072, &quot;__folium_color&quot;: &quot;#9d2964&quot;, &quot;id&quot;: &quot;LC04&quot;, &quot;name&quot;: &quot;Dauphin&quot;, &quot;source&quot;: &quot;https://simplemaps.com&quot;}, &quot;type&quot;: &quot;Feature&quot;}], &quot;type&quot;: &quot;FeatureCollection&quot;});\n\n        \n    \n    geo_json_cc5514f9d6c945d0063a8967ab86ffa8.bindTooltip(\n    function(layer){\n    let div = L.DomUtil.create(&#x27;div&#x27;);\n    \n    let handleObject = feature =&gt; {\n        if (feature === null) {\n            return &#x27;&#x27;;\n        } else if (typeof(feature)==&#x27;object&#x27;) {\n            return JSON.stringify(feature);\n        } else {\n            return feature;\n        }\n    }\n    let fields = [&quot;source&quot;, &quot;id&quot;, &quot;name&quot;, &quot;Population&quot;];\n    let aliases = [&quot;source&quot;, &quot;id&quot;, &quot;name&quot;, &quot;Population&quot;];\n    let table = &#x27;&lt;table&gt;&#x27; +\n        String(\n        fields.map(\n        (v,i)=&gt;\n        `&lt;tr&gt;\n            &lt;th&gt;${aliases[i]}&lt;/th&gt;\n            \n            &lt;td&gt;${handleObject(layer.feature.properties[v])}&lt;/td&gt;\n        &lt;/tr&gt;`).join(&#x27;&#x27;))\n    +&#x27;&lt;/table&gt;&#x27;;\n    div.innerHTML=table;\n    \n    return div\n    }\n    ,{\n  &quot;sticky&quot;: true,\n  &quot;className&quot;: &quot;foliumtooltip&quot;,\n});\n                     \n    \n            geo_json_cc5514f9d6c945d0063a8967ab86ffa8.addTo(map_dec8c96153017d5050cb025e5be75ddf);\n        \n    \n    var color_map_d620d21f63c1d13e966b2d196bdce79e = {};\n\n    \n    color_map_d620d21f63c1d13e966b2d196bdce79e.color = d3.scale.threshold()\n              .domain([5189.0, 5273.24248496994, 5357.48496993988, 5441.727454909819, 5525.969939879759, 5610.212424849699, 5694.454909819639, 5778.697394789579, 5862.939879759519, 5947.182364729459, 6031.424849699399, 6115.667334669339, 6199.909819639279, 6284.152304609219, 6368.394789579158, 6452.637274549098, 6536.879759519038, 6621.122244488978, 6705.364729458917, 6789.607214428857, 6873.849699398797, 6958.092184368737, 7042.3346693386775, 7126.5771543086175, 7210.819639278558, 7295.062124248498, 7379.304609218437, 7463.547094188377, 7547.789579158316, 7632.032064128256, 7716.274549098196, 7800.517034068136, 7884.759519038076, 7969.002004008016, 8053.244488977956, 8137.486973947896, 8221.729458917835, 8305.971943887776, 8390.214428857715, 8474.456913827655, 8558.699398797595, 8642.941883767535, 8727.184368737475, 8811.426853707415, 8895.669338677355, 8979.911823647295, 9064.154308617235, 9148.396793587173, 9232.639278557115, 9316.881763527053, 9401.124248496995, 9485.366733466934, 9569.609218436874, 9653.851703406814, 9738.094188376754, 9822.336673346694, 9906.579158316632, 9990.821643286574, 10075.064128256512, 10159.306613226454, 10243.549098196392, 10327.791583166334, 10412.034068136272, 10496.276553106212, 10580.519038076152, 10664.761523046092, 10749.004008016032, 10833.24649298597, 10917.488977955913, 11001.73146292585, 11085.973947895793, 11170.21643286573, 11254.458917835671, 11338.701402805611, 11422.943887775551, 11507.186372745491, 11591.428857715431, 11675.671342685371, 11759.91382765531, 11844.156312625251, 11928.39879759519, 12012.641282565131, 12096.88376753507, 12181.12625250501, 12265.36873747495, 12349.61122244489, 12433.85370741483, 12518.09619238477, 12602.33867735471, 12686.581162324648, 12770.82364729459, 12855.066132264528, 12939.30861723447, 13023.551102204408, 13107.793587174348, 13192.036072144288, 13276.278557114229, 13360.521042084169, 13444.763527054109, 13529.006012024049, 13613.248496993989, 13697.490981963927, 13781.733466933867, 13865.975951903807, 13950.218436873747, 14034.460921843687, 14118.703406813627, 14202.945891783567, 14287.188376753507, 14371.430861723447, 14455.673346693387, 14539.915831663327, 14624.158316633266, 14708.400801603206, 14792.643286573146, 14876.885771543086, 14961.128256513026, 15045.370741482966, 15129.613226452906, 15213.855711422846, 15298.098196392786, 15382.340681362726, 15466.583166332666, 15550.825651302604, 15635.068136272545, 15719.310621242485, 15803.553106212425, 15887.795591182365, 15972.038076152305, 16056.280561122245, 16140.523046092185, 16224.765531062125, 16309.008016032065, 16393.250501002003, 16477.49298597194, 16561.735470941883, 16645.977955911825, 16730.220440881763, 16814.4629258517, 16898.705410821643, 16982.947895791585, 17067.190380761524, 17151.43286573146, 17235.675350701404, 17319.917835671342, 17404.160320641284, 17488.402805611222, 17572.64529058116, 17656.887775551102, 17741.130260521044, 17825.372745490982, 17909.61523046092, 17993.857715430862, 18078.100200400804, 18162.342685370742, 18246.58517034068, 18330.82765531062, 18415.07014028056, 18499.312625250503, 18583.55511022044, 18667.79759519038, 18752.04008016032, 18836.282565130263, 18920.5250501002, 19004.76753507014, 19089.010020040078, 19173.25250501002, 19257.49498997996, 19341.7374749499, 19425.979959919838, 19510.22244488978, 19594.46492985972, 19678.70741482966, 19762.949899799598, 19847.19238476954, 19931.43486973948, 20015.67735470942, 20099.919839679358, 20184.162324649296, 20268.40480961924, 20352.64729458918, 20436.88977955912, 20521.132264529057, 20605.374749499, 20689.61723446894, 20773.85971943888, 20858.102204408817, 20942.344689378755, 21026.587174348697, 21110.82965931864, 21195.072144288577, 21279.314629258515, 21363.557114228457, 21447.7995991984, 21532.042084168337, 21616.284569138275, 21700.527054108217, 21784.769539078156, 21869.012024048097, 21953.254509018036, 22037.496993987977, 22121.739478957916, 22205.981963927854, 22290.224448897796, 22374.466933867734, 22458.709418837676, 22542.951903807614, 22627.194388777556, 22711.436873747494, 22795.679358717436, 22879.921843687374, 22964.164328657316, 23048.406813627254, 23132.649298597193, 23216.891783567135, 23301.134268537073, 23385.376753507015, 23469.619238476953, 23553.861723446895, 23638.104208416833, 23722.346693386775, 23806.589178356713, 23890.831663326655, 23975.074148296593, 24059.31663326653, 24143.559118236473, 24227.80160320641, 24312.044088176353, 24396.28657314629, 24480.529058116234, 24564.77154308617, 24649.014028056114, 24733.256513026052, 24817.498997995994, 24901.741482965932, 24985.98396793587, 25070.226452905812, 25154.46893787575, 25238.711422845692, 25322.95390781563, 25407.196392785572, 25491.43887775551, 25575.681362725452, 25659.92384769539, 25744.166332665332, 25828.40881763527, 25912.65130260521, 25996.89378757515, 26081.13627254509, 26165.37875751503, 26249.62124248497, 26333.86372745491, 26418.10621242485, 26502.34869739479, 26586.59118236473, 26670.833667334668, 26755.07615230461, 26839.318637274548, 26923.56112224449, 27007.803607214428, 27092.04609218437, 27176.288577154308, 27260.53106212425, 27344.773547094188, 27429.01603206413, 27513.258517034068, 27597.501002004006, 27681.743486973948, 27765.985971943886, 27850.22845691383, 27934.470941883766, 28018.71342685371, 28102.955911823647, 28187.19839679359, 28271.440881763527, 28355.68336673347, 28439.925851703407, 28524.168336673345, 28608.410821643287, 28692.653306613225, 28776.895791583167, 28861.138276553105, 28945.380761523047, 29029.623246492985, 29113.865731462927, 29198.108216432865, 29282.350701402807, 29366.593186372746, 29450.835671342684, 29535.078156312626, 29619.320641282564, 29703.563126252506, 29787.805611222444, 29872.048096192386, 29956.290581162324, 30040.533066132266, 30124.775551102204, 30209.018036072146, 30293.260521042084, 30377.503006012023, 30461.745490981964, 30545.987975951903, 30630.230460921844, 30714.472945891783, 30798.715430861725, 30882.957915831663, 30967.200400801605, 31051.442885771543, 31135.68537074148, 31219.927855711423, 31304.17034068136, 31388.412825651303, 31472.65531062124, 31556.897795591183, 31641.14028056112, 31725.382765531063, 31809.625250501, 31893.867735470943, 31978.11022044088, 32062.35270541082, 32146.59519038076, 32230.8376753507, 32315.080160320642, 32399.32264529058, 32483.565130260522, 32567.80761523046, 32652.050100200402, 32736.29258517034, 32820.53507014028, 32904.777555110224, 32989.020040080155, 33073.2625250501, 33157.50501002004, 33241.74749498998, 33325.98997995992, 33410.23246492986, 33494.4749498998, 33578.717434869744, 33662.959919839675, 33747.20240480962, 33831.44488977956, 33915.6873747495, 33999.92985971944, 34084.172344689374, 34168.41482965932, 34252.65731462926, 34336.899799599196, 34421.14228456914, 34505.38476953908, 34589.62725450902, 34673.86973947896, 34758.112224448894, 34842.35470941884, 34926.59719438878, 35010.839679358716, 35095.08216432866, 35179.32464929859, 35263.56713426854, 35347.80961923848, 35432.052104208415, 35516.29458917836, 35600.53707414829, 35684.77955911824, 35769.022044088175, 35853.26452905811, 35937.50701402806, 36021.749498998, 36105.991983967935, 36190.23446893788, 36274.47695390781, 36358.71943887776, 36442.961923847695, 36527.20440881763, 36611.44689378758, 36695.68937875751, 36779.931863727455, 36864.174348697394, 36948.41683366733, 37032.65931863728, 37116.901803607216, 37201.144288577154, 37285.3867735471, 37369.62925851703, 37453.871743486976, 37538.114228456914, 37622.35671342685, 37706.5991983968, 37790.84168336673, 37875.084168336674, 37959.32665330661, 38043.56913827655, 38127.811623246496, 38212.054108216435, 38296.29659318637, 38380.53907815631, 38464.78156312625, 38549.024048096195, 38633.26653306613, 38717.50901803607, 38801.75150300601, 38885.993987975955, 38970.23647294589, 39054.47895791583, 39138.72144288577, 39222.96392785571, 39307.20641282565, 39391.44889779559, 39475.69138276553, 39559.93386773547, 39644.17635270541, 39728.41883767535, 39812.66132264529, 39896.90380761523, 39981.146292585174, 40065.38877755511, 40149.63126252505, 40233.87374749499, 40318.11623246493, 40402.35871743487, 40486.60120240481, 40570.84368737475, 40655.08617234469, 40739.32865731463, 40823.57114228457, 40907.81362725451, 40992.05611222445, 41076.298597194385, 41160.54108216433, 41244.78356713427, 41329.02605210421, 41413.268537074146, 41497.51102204409, 41581.75350701403, 41665.99599198397, 41750.238476953906, 41834.48096192385, 41918.72344689379, 42002.96593186373, 42087.208416833666, 42171.450901803604, 42255.69338677355, 42339.93587174349, 42424.178356713426, 42508.420841683364, 42592.66332665331, 42676.90581162325, 42761.14829659319, 42845.390781563125, 42929.63326653306, 43013.87575150301, 43098.11823647295, 43182.360721442885, 43266.60320641282, 43350.84569138277, 43435.08817635271, 43519.330661322645, 43603.57314629258, 43687.81563126252, 43772.05811623247, 43856.300601202405, 43940.54308617234, 44024.78557114228, 44109.02805611223, 44193.270541082165, 44277.513026052104, 44361.75551102204, 44445.99799599199, 44530.240480961926, 44614.482965931864, 44698.7254509018, 44782.96793587174, 44867.210420841686, 44951.452905811624, 45035.69539078156, 45119.9378757515, 45204.180360721446, 45288.422845691384, 45372.66533066132, 45456.90781563126, 45541.1503006012, 45625.392785571144, 45709.63527054108, 45793.87775551102, 45878.12024048096, 45962.362725450905, 46046.60521042084, 46130.84769539078, 46215.09018036072, 46299.332665330665, 46383.5751503006, 46467.81763527054, 46552.06012024048, 46636.30260521042, 46720.54509018036, 46804.7875751503, 46889.03006012024, 46973.27254509018, 47057.51503006012, 47141.75751503006, 47226.0])\n              .range([&#x27;#000004ff&#x27;, &#x27;#000004ff&#x27;, &#x27;#010005ff&#x27;, &#x27;#010005ff&#x27;, &#x27;#010106ff&#x27;, &#x27;#010107ff&#x27;, &#x27;#010108ff&#x27;, &#x27;#010109ff&#x27;, &#x27;#02010aff&#x27;, &#x27;#02010bff&#x27;, &#x27;#02020cff&#x27;, &#x27;#02020dff&#x27;, &#x27;#02020eff&#x27;, &#x27;#02020fff&#x27;, &#x27;#030210ff&#x27;, &#x27;#030211ff&#x27;, &#x27;#040312ff&#x27;, &#x27;#040313ff&#x27;, &#x27;#040314ff&#x27;, &#x27;#040316ff&#x27;, &#x27;#050417ff&#x27;, &#x27;#050418ff&#x27;, &#x27;#060419ff&#x27;, &#x27;#06041aff&#x27;, &#x27;#07051bff&#x27;, &#x27;#07051cff&#x27;, &#x27;#08051dff&#x27;, &#x27;#08051eff&#x27;, &#x27;#090620ff&#x27;, &#x27;#090621ff&#x27;, &#x27;#0a0722ff&#x27;, &#x27;#0a0723ff&#x27;, &#x27;#0b0724ff&#x27;, &#x27;#0b0725ff&#x27;, &#x27;#0c0827ff&#x27;, &#x27;#0c0828ff&#x27;, &#x27;#0d0829ff&#x27;, &#x27;#0d082aff&#x27;, &#x27;#0e092cff&#x27;, &#x27;#0f092dff&#x27;, &#x27;#10092eff&#x27;, &#x27;#110930ff&#x27;, &#x27;#110a31ff&#x27;, &#x27;#120a32ff&#x27;, &#x27;#130a33ff&#x27;, &#x27;#140b34ff&#x27;, &#x27;#140b35ff&#x27;, &#x27;#150b37ff&#x27;, &#x27;#150b38ff&#x27;, &#x27;#160b39ff&#x27;, &#x27;#170b3aff&#x27;, &#x27;#180c3cff&#x27;, &#x27;#180c3dff&#x27;, &#x27;#190c3eff&#x27;, &#x27;#1a0c40ff&#x27;, &#x27;#1b0c41ff&#x27;, &#x27;#1b0c42ff&#x27;, &#x27;#1c0c43ff&#x27;, &#x27;#1d0c44ff&#x27;, &#x27;#1e0c45ff&#x27;, &#x27;#1e0c47ff&#x27;, &#x27;#1f0c48ff&#x27;, &#x27;#200c49ff&#x27;, &#x27;#210c4aff&#x27;, &#x27;#220c4bff&#x27;, &#x27;#230c4cff&#x27;, &#x27;#230c4eff&#x27;, &#x27;#240c4fff&#x27;, &#x27;#250c50ff&#x27;, &#x27;#260b51ff&#x27;, &#x27;#270b52ff&#x27;, &#x27;#280b53ff&#x27;, &#x27;#280b54ff&#x27;, &#x27;#290b55ff&#x27;, &#x27;#2a0b56ff&#x27;, &#x27;#2b0b57ff&#x27;, &#x27;#2c0b59ff&#x27;, &#x27;#2d0a5aff&#x27;, &#x27;#2e0a5bff&#x27;, &#x27;#2f0a5bff&#x27;, &#x27;#300a5cff&#x27;, &#x27;#310a5dff&#x27;, &#x27;#320a5eff&#x27;, &#x27;#330a5eff&#x27;, &#x27;#340a5fff&#x27;, &#x27;#350960ff&#x27;, &#x27;#360961ff&#x27;, &#x27;#370961ff&#x27;, &#x27;#380962ff&#x27;, &#x27;#380962ff&#x27;, &#x27;#390963ff&#x27;, &#x27;#3a0963ff&#x27;, &#x27;#3b0964ff&#x27;, &#x27;#3c0964ff&#x27;, &#x27;#3d0965ff&#x27;, &#x27;#3d0965ff&#x27;, &#x27;#3e0966ff&#x27;, &#x27;#3f0966ff&#x27;, &#x27;#400a67ff&#x27;, &#x27;#410a67ff&#x27;, &#x27;#420a68ff&#x27;, &#x27;#430a68ff&#x27;, &#x27;#440a68ff&#x27;, &#x27;#440a69ff&#x27;, &#x27;#450a69ff&#x27;, &#x27;#460a6aff&#x27;, &#x27;#470b6aff&#x27;, &#x27;#480b6aff&#x27;, &#x27;#490b6aff&#x27;, &#x27;#490b6bff&#x27;, &#x27;#4a0c6bff&#x27;, &#x27;#4b0c6bff&#x27;, &#x27;#4c0c6bff&#x27;, &#x27;#4d0c6cff&#x27;, &#x27;#4d0d6cff&#x27;, &#x27;#4e0d6cff&#x27;, &#x27;#4f0d6cff&#x27;, &#x27;#500d6cff&#x27;, &#x27;#510e6cff&#x27;, &#x27;#520e6dff&#x27;, &#x27;#520e6dff&#x27;, &#x27;#530e6dff&#x27;, &#x27;#540f6dff&#x27;, &#x27;#550f6dff&#x27;, &#x27;#560f6dff&#x27;, &#x27;#570f6eff&#x27;, &#x27;#58106eff&#x27;, &#x27;#59106eff&#x27;, &#x27;#59106eff&#x27;, &#x27;#5a106eff&#x27;, &#x27;#5b116eff&#x27;, &#x27;#5c126eff&#x27;, &#x27;#5c126eff&#x27;, &#x27;#5d126eff&#x27;, &#x27;#5e126eff&#x27;, &#x27;#5f136eff&#x27;, &#x27;#60136eff&#x27;, &#x27;#61136eff&#x27;, &#x27;#61136eff&#x27;, &#x27;#62146eff&#x27;, &#x27;#63146eff&#x27;, &#x27;#64156eff&#x27;, &#x27;#64156eff&#x27;, &#x27;#65156eff&#x27;, &#x27;#66156eff&#x27;, &#x27;#67166eff&#x27;, &#x27;#68166eff&#x27;, &#x27;#69166eff&#x27;, &#x27;#6a166eff&#x27;, &#x27;#6a176eff&#x27;, &#x27;#6b176eff&#x27;, &#x27;#6c186eff&#x27;, &#x27;#6d186eff&#x27;, &#x27;#6d186eff&#x27;, &#x27;#6e186eff&#x27;, &#x27;#6f196eff&#x27;, &#x27;#70196eff&#x27;, &#x27;#71196eff&#x27;, &#x27;#72196eff&#x27;, &#x27;#721a6eff&#x27;, &#x27;#731a6eff&#x27;, &#x27;#741a6eff&#x27;, &#x27;#751a6eff&#x27;, &#x27;#761b6eff&#x27;, &#x27;#771b6dff&#x27;, &#x27;#771c6dff&#x27;, &#x27;#781c6dff&#x27;, &#x27;#791c6dff&#x27;, &#x27;#7a1c6dff&#x27;, &#x27;#7b1d6dff&#x27;, &#x27;#7c1d6dff&#x27;, &#x27;#7c1d6dff&#x27;, &#x27;#7d1e6dff&#x27;, &#x27;#7e1e6dff&#x27;, &#x27;#7f1e6cff&#x27;, &#x27;#7f1e6cff&#x27;, &#x27;#801f6cff&#x27;, &#x27;#811f6cff&#x27;, &#x27;#82206cff&#x27;, &#x27;#83206bff&#x27;, &#x27;#84206bff&#x27;, &#x27;#85206bff&#x27;, &#x27;#85216bff&#x27;, &#x27;#86216bff&#x27;, &#x27;#87216bff&#x27;, &#x27;#88216aff&#x27;, &#x27;#88226aff&#x27;, &#x27;#89226aff&#x27;, &#x27;#8a226aff&#x27;, &#x27;#8b2269ff&#x27;, &#x27;#8c2369ff&#x27;, &#x27;#8d2369ff&#x27;, &#x27;#8d2369ff&#x27;, &#x27;#8e2369ff&#x27;, &#x27;#8f2469ff&#x27;, &#x27;#902468ff&#x27;, &#x27;#902568ff&#x27;, &#x27;#912568ff&#x27;, &#x27;#922568ff&#x27;, &#x27;#932567ff&#x27;, &#x27;#932667ff&#x27;, &#x27;#952667ff&#x27;, &#x27;#962667ff&#x27;, &#x27;#972666ff&#x27;, &#x27;#972766ff&#x27;, &#x27;#982766ff&#x27;, &#x27;#992766ff&#x27;, &#x27;#9a2765ff&#x27;, &#x27;#9a2865ff&#x27;, &#x27;#9b2864ff&#x27;, &#x27;#9c2964ff&#x27;, &#x27;#9d2964ff&#x27;, &#x27;#9e2964ff&#x27;, &#x27;#9f2a63ff&#x27;, &#x27;#9f2a63ff&#x27;, &#x27;#a02a63ff&#x27;, &#x27;#a12a63ff&#x27;, &#x27;#a22b62ff&#x27;, &#x27;#a32b61ff&#x27;, &#x27;#a32c61ff&#x27;, &#x27;#a42c60ff&#x27;, &#x27;#a52c60ff&#x27;, &#x27;#a62c60ff&#x27;, &#x27;#a62d60ff&#x27;, &#x27;#a72d5fff&#x27;, &#x27;#a82e5fff&#x27;, &#x27;#a92e5eff&#x27;, &#x27;#a92e5eff&#x27;, &#x27;#aa2e5eff&#x27;, &#x27;#ab2f5eff&#x27;, &#x27;#ac2f5dff&#x27;, &#x27;#ad305dff&#x27;, &#x27;#ae305cff&#x27;, &#x27;#ae305cff&#x27;, &#x27;#af305bff&#x27;, &#x27;#b0315bff&#x27;, &#x27;#b1315aff&#x27;, &#x27;#b1325aff&#x27;, &#x27;#b2325aff&#x27;, &#x27;#b3325aff&#x27;, &#x27;#b43259ff&#x27;, &#x27;#b53359ff&#x27;, &#x27;#b63358ff&#x27;, &#x27;#b63458ff&#x27;, &#x27;#b73457ff&#x27;, &#x27;#b83557ff&#x27;, &#x27;#b93556ff&#x27;, &#x27;#b93556ff&#x27;, &#x27;#ba3555ff&#x27;, &#x27;#bb3655ff&#x27;, &#x27;#bc3654ff&#x27;, &#x27;#bd3754ff&#x27;, &#x27;#bd3753ff&#x27;, &#x27;#be3853ff&#x27;, &#x27;#bf3952ff&#x27;, &#x27;#c03952ff&#x27;, &#x27;#c03a51ff&#x27;, &#x27;#c13a50ff&#x27;, &#x27;#c13a50ff&#x27;, &#x27;#c23a4fff&#x27;, &#x27;#c33b4fff&#x27;, &#x27;#c43b4eff&#x27;, &#x27;#c43c4eff&#x27;, &#x27;#c53c4dff&#x27;, &#x27;#c63d4dff&#x27;, &#x27;#c73d4cff&#x27;, &#x27;#c73e4cff&#x27;, &#x27;#c83e4bff&#x27;, &#x27;#c83f4bff&#x27;, &#x27;#c93f4aff&#x27;, &#x27;#ca404aff&#x27;, &#x27;#cb4049ff&#x27;, &#x27;#cb4149ff&#x27;, &#x27;#cc4148ff&#x27;, &#x27;#cc4248ff&#x27;, &#x27;#cd4247ff&#x27;, &#x27;#ce4347ff&#x27;, &#x27;#cf4346ff&#x27;, &#x27;#cf4446ff&#x27;, &#x27;#d04445ff&#x27;, &#x27;#d04545ff&#x27;, &#x27;#d24544ff&#x27;, &#x27;#d24644ff&#x27;, &#x27;#d34643ff&#x27;, &#x27;#d34743ff&#x27;, &#x27;#d44742ff&#x27;, &#x27;#d44842ff&#x27;, &#x27;#d54941ff&#x27;, &#x27;#d64a40ff&#x27;, &#x27;#d74a3fff&#x27;, &#x27;#d84b3fff&#x27;, &#x27;#d84c3eff&#x27;, &#x27;#d94c3eff&#x27;, &#x27;#d94d3dff&#x27;, &#x27;#da4d3cff&#x27;, &#x27;#da4e3cff&#x27;, &#x27;#db4e3bff&#x27;, &#x27;#db4f3bff&#x27;, &#x27;#dc503aff&#x27;, &#x27;#dd513aff&#x27;, &#x27;#de5139ff&#x27;, &#x27;#de5238ff&#x27;, &#x27;#df5237ff&#x27;, &#x27;#df5337ff&#x27;, &#x27;#e05436ff&#x27;, &#x27;#e05536ff&#x27;, &#x27;#e15535ff&#x27;, &#x27;#e15635ff&#x27;, &#x27;#e25634ff&#x27;, &#x27;#e25734ff&#x27;, &#x27;#e35833ff&#x27;, &#x27;#e35933ff&#x27;, &#x27;#e45932ff&#x27;, &#x27;#e45a31ff&#x27;, &#x27;#e55b30ff&#x27;, &#x27;#e55c30ff&#x27;, &#x27;#e65c2fff&#x27;, &#x27;#e65d2fff&#x27;, &#x27;#e75d2eff&#x27;, &#x27;#e75e2eff&#x27;, &#x27;#e85f2dff&#x27;, &#x27;#e8602dff&#x27;, &#x27;#e9602cff&#x27;, &#x27;#e9612bff&#x27;, &#x27;#ea622aff&#x27;, &#x27;#eb632aff&#x27;, &#x27;#eb6329ff&#x27;, &#x27;#eb6429ff&#x27;, &#x27;#eb6528ff&#x27;, &#x27;#ec6627ff&#x27;, &#x27;#ec6726ff&#x27;, &#x27;#ed6726ff&#x27;, &#x27;#ed6825ff&#x27;, &#x27;#ee6924ff&#x27;, &#x27;#ee6a24ff&#x27;, &#x27;#ef6a23ff&#x27;, &#x27;#ef6b23ff&#x27;, &#x27;#ef6c22ff&#x27;, &#x27;#ef6d21ff&#x27;, &#x27;#f06e20ff&#x27;, &#x27;#f06f20ff&#x27;, &#x27;#f16f1fff&#x27;, &#x27;#f1701fff&#x27;, &#x27;#f1721eff&#x27;, &#x27;#f1731dff&#x27;, &#x27;#f2731cff&#x27;, &#x27;#f2741cff&#x27;, &#x27;#f3751bff&#x27;, &#x27;#f3761bff&#x27;, &#x27;#f3771aff&#x27;, &#x27;#f37819ff&#x27;, &#x27;#f47818ff&#x27;, &#x27;#f47918ff&#x27;, &#x27;#f57a17ff&#x27;, &#x27;#f57b17ff&#x27;, &#x27;#f57c16ff&#x27;, &#x27;#f57d15ff&#x27;, &#x27;#f67d14ff&#x27;, &#x27;#f67e14ff&#x27;, &#x27;#f67f13ff&#x27;, &#x27;#f68013ff&#x27;, &#x27;#f78112ff&#x27;, &#x27;#f78212ff&#x27;, &#x27;#f78311ff&#x27;, &#x27;#f78410ff&#x27;, &#x27;#f8850fff&#x27;, &#x27;#f8850fff&#x27;, &#x27;#f8860eff&#x27;, &#x27;#f8870dff&#x27;, &#x27;#f8880cff&#x27;, &#x27;#f9890bff&#x27;, &#x27;#f98a0bff&#x27;, &#x27;#f98b0aff&#x27;, &#x27;#f98c0aff&#x27;, &#x27;#f98c09ff&#x27;, &#x27;#f98d09ff&#x27;, &#x27;#fa8e08ff&#x27;, &#x27;#fa8f08ff&#x27;, &#x27;#fa9007ff&#x27;, &#x27;#fa9107ff&#x27;, &#x27;#fa9207ff&#x27;, &#x27;#fa9307ff&#x27;, &#x27;#fb9506ff&#x27;, &#x27;#fb9606ff&#x27;, &#x27;#fb9606ff&#x27;, &#x27;#fb9706ff&#x27;, &#x27;#fb9806ff&#x27;, &#x27;#fb9906ff&#x27;, &#x27;#fb9a06ff&#x27;, &#x27;#fb9b06ff&#x27;, &#x27;#fb9c06ff&#x27;, &#x27;#fb9d06ff&#x27;, &#x27;#fc9e07ff&#x27;, &#x27;#fc9f07ff&#x27;, &#x27;#fca007ff&#x27;, &#x27;#fca107ff&#x27;, &#x27;#fca208ff&#x27;, &#x27;#fca308ff&#x27;, &#x27;#fca409ff&#x27;, &#x27;#fca509ff&#x27;, &#x27;#fca60aff&#x27;, &#x27;#fca60bff&#x27;, &#x27;#fca70cff&#x27;, &#x27;#fca80cff&#x27;, &#x27;#fca90dff&#x27;, &#x27;#fcaa0eff&#x27;, &#x27;#fcab10ff&#x27;, &#x27;#fcac11ff&#x27;, &#x27;#fcad11ff&#x27;, &#x27;#fcae12ff&#x27;, &#x27;#fcaf13ff&#x27;, &#x27;#fcb014ff&#x27;, &#x27;#fcb115ff&#x27;, &#x27;#fcb216ff&#x27;, &#x27;#fcb317ff&#x27;, &#x27;#fcb418ff&#x27;, &#x27;#fcb519ff&#x27;, &#x27;#fbb61aff&#x27;, &#x27;#fbb71bff&#x27;, &#x27;#fbb81dff&#x27;, &#x27;#fbb91eff&#x27;, &#x27;#fbbb1fff&#x27;, &#x27;#fbbc20ff&#x27;, &#x27;#fbbd21ff&#x27;, &#x27;#fbbe22ff&#x27;, &#x27;#fbbf23ff&#x27;, &#x27;#fbc025ff&#x27;, &#x27;#fac126ff&#x27;, &#x27;#fac227ff&#x27;, &#x27;#fac328ff&#x27;, &#x27;#fac429ff&#x27;, &#x27;#fac52aff&#x27;, &#x27;#fac62cff&#x27;, &#x27;#fac72dff&#x27;, &#x27;#fac72eff&#x27;, &#x27;#f9c830ff&#x27;, &#x27;#f9c931ff&#x27;, &#x27;#f9ca33ff&#x27;, &#x27;#f9cb34ff&#x27;, &#x27;#f9cc35ff&#x27;, &#x27;#f9cd36ff&#x27;, &#x27;#f8ce38ff&#x27;, &#x27;#f8cf39ff&#x27;, &#x27;#f8d03bff&#x27;, &#x27;#f8d13cff&#x27;, &#x27;#f7d23eff&#x27;, &#x27;#f7d33fff&#x27;, &#x27;#f7d441ff&#x27;, &#x27;#f7d543ff&#x27;, &#x27;#f6d644ff&#x27;, &#x27;#f6d746ff&#x27;, &#x27;#f6d847ff&#x27;, &#x27;#f5d949ff&#x27;, &#x27;#f5da4aff&#x27;, &#x27;#f5db4cff&#x27;, &#x27;#f5dc4dff&#x27;, &#x27;#f4dd4fff&#x27;, &#x27;#f4de51ff&#x27;, &#x27;#f4df53ff&#x27;, &#x27;#f4e055ff&#x27;, &#x27;#f4e256ff&#x27;, &#x27;#f4e358ff&#x27;, &#x27;#f3e45aff&#x27;, &#x27;#f3e55cff&#x27;, &#x27;#f3e65dff&#x27;, &#x27;#f3e65fff&#x27;, &#x27;#f2e761ff&#x27;, &#x27;#f2e863ff&#x27;, &#x27;#f2e966ff&#x27;, &#x27;#f2ea68ff&#x27;, &#x27;#f2eb6aff&#x27;, &#x27;#f2ec6cff&#x27;, &#x27;#f1ed6eff&#x27;, &#x27;#f1ed70ff&#x27;, &#x27;#f1ee72ff&#x27;, &#x27;#f1ef74ff&#x27;, &#x27;#f1f076ff&#x27;, &#x27;#f1f178ff&#x27;, &#x27;#f2f27aff&#x27;, &#x27;#f2f27cff&#x27;, &#x27;#f2f37eff&#x27;, &#x27;#f2f481ff&#x27;, &#x27;#f3f583ff&#x27;, &#x27;#f3f585ff&#x27;, &#x27;#f3f687ff&#x27;, &#x27;#f3f689ff&#x27;, &#x27;#f4f78bff&#x27;, &#x27;#f4f88eff&#x27;, &#x27;#f5f990ff&#x27;, &#x27;#f5f992ff&#x27;, &#x27;#f6fa94ff&#x27;, &#x27;#f6fa96ff&#x27;, &#x27;#f7fb98ff&#x27;, &#x27;#f8fb9aff&#x27;, &#x27;#f9fc9bff&#x27;, &#x27;#f9fc9dff&#x27;, &#x27;#fafd9fff&#x27;, &#x27;#fafda1ff&#x27;, &#x27;#fbfea3ff&#x27;, &#x27;#fcffa4ff&#x27;]);\n    \n\n    color_map_d620d21f63c1d13e966b2d196bdce79e.x = d3.scale.linear()\n              .domain([5189.0, 47226.0])\n              .range([0, 450 - 50]);\n\n    color_map_d620d21f63c1d13e966b2d196bdce79e.legend = L.control({position: &#x27;topright&#x27;});\n    color_map_d620d21f63c1d13e966b2d196bdce79e.legend.onAdd = function (map) {var div = L.DomUtil.create(&#x27;div&#x27;, &#x27;legend&#x27;); return div};\n    color_map_d620d21f63c1d13e966b2d196bdce79e.legend.addTo(map_dec8c96153017d5050cb025e5be75ddf);\n\n    color_map_d620d21f63c1d13e966b2d196bdce79e.xAxis = d3.svg.axis()\n        .scale(color_map_d620d21f63c1d13e966b2d196bdce79e.x)\n        .orient(&quot;top&quot;)\n        .tickSize(1)\n        .tickValues([5189.0, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 9475.125490196078, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 13761.250980392157, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 18047.376470588235, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 22333.501960784313, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 26619.62745098039, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 30905.75294117647, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 35191.87843137255, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 39478.00392156863, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, 43764.129411764705, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;, &#x27;&#x27;]);\n\n    color_map_d620d21f63c1d13e966b2d196bdce79e.svg = d3.select(&quot;.legend.leaflet-control&quot;).append(&quot;svg&quot;)\n        .attr(&quot;id&quot;, &#x27;legend&#x27;)\n        .attr(&quot;width&quot;, 450)\n        .attr(&quot;height&quot;, 40);\n\n    color_map_d620d21f63c1d13e966b2d196bdce79e.g = color_map_d620d21f63c1d13e966b2d196bdce79e.svg.append(&quot;g&quot;)\n        .attr(&quot;class&quot;, &quot;key&quot;)\n        .attr(&quot;fill&quot;, &quot;black&quot;)\n        .attr(&quot;transform&quot;, &quot;translate(25,16)&quot;);\n\n    color_map_d620d21f63c1d13e966b2d196bdce79e.g.selectAll(&quot;rect&quot;)\n        .data(color_map_d620d21f63c1d13e966b2d196bdce79e.color.range().map(function(d, i) {\n          return {\n            x0: i ? color_map_d620d21f63c1d13e966b2d196bdce79e.x(color_map_d620d21f63c1d13e966b2d196bdce79e.color.domain()[i - 1]) : color_map_d620d21f63c1d13e966b2d196bdce79e.x.range()[0],\n            x1: i &lt; color_map_d620d21f63c1d13e966b2d196bdce79e.color.domain().length ? color_map_d620d21f63c1d13e966b2d196bdce79e.x(color_map_d620d21f63c1d13e966b2d196bdce79e.color.domain()[i]) : color_map_d620d21f63c1d13e966b2d196bdce79e.x.range()[1],\n            z: d\n          };\n        }))\n      .enter().append(&quot;rect&quot;)\n        .attr(&quot;height&quot;, 40 - 30)\n        .attr(&quot;x&quot;, function(d) { return d.x0; })\n        .attr(&quot;width&quot;, function(d) { return d.x1 - d.x0; })\n        .style(&quot;fill&quot;, function(d) { return d.z; });\n\n    color_map_d620d21f63c1d13e966b2d196bdce79e.g.call(color_map_d620d21f63c1d13e966b2d196bdce79e.xAxis).append(&quot;text&quot;)\n        .attr(&quot;class&quot;, &quot;caption&quot;)\n        .attr(&quot;y&quot;, 21)\n        .attr(&quot;fill&quot;, &quot;black&quot;)\n        .text(&quot;Population&quot;);\n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n``````````\n:::\n:::\n\n\n:::: {.callout-caution appearance=\"simple\" icon=\"false\"}\n### Code Challenge 4.2\n\nThe following CSV file contains US unemployment data from October, 2012: \n\nhttps://raw.githubusercontent.com/wrobstory/vincent/master/examples/data/US_Unemployment_Oct2012.csv\n\nThis GeoJSON file contains the geometry information about US states: [us-states.geojson](../assets/us-states.geojson).\n\nUse these files to create a choropleth map of the unemployment data by state.\n\n1. Load the unemployment data as a Pandas DataFrame.\n2. Load the states' geometry data into geopandas.\n3. Merge the data on a common key.\n4. Explore with geopandas!\n\nTo initially center map, use the latitude and longitude of the continental US,\nwhich is `39.8333333,-98.585522`.\n\n::: {.callout-caution collapse=\"true\" appearance=\"simple\" icon=\"false\"}\n#### Solution\n\n::: {#2a18647a .cell execution_count=12}\n``` {.python .cell-code}\nimport folium\nimport pandas as pd\nimport geopandas as gpd\n\nCENTER_US = (39.8333333,-98.585522)\nu_df = pd.read_csv('https://raw.githubusercontent.com/wrobstory/vincent/master/examples/data/US_Unemployment_Oct2012.csv')\nstate_geojson = 'https://su-ist356-m003-fall-2025.github.io/course-home/assets/stlucia.geojson'\ngeo = gpd.read_file(state_geojson)\ncombined = pd.merge(geo, u_df, left_on='id', right_on='State')\nmp = folium.Map(location=CENTER_US, zoom_start=4)\nout_map = combined.explore(m=mp, column='Unemployment', cmap='YlGn', legend=True)\nout_map\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n/tmp/ipykernel_10063/839896938.py:11: UserWarning: The GeoSeries you are attempting to plot is composed of empty geometries. Nothing has been displayed.\n  out_map = combined.explore(m=mp, column='Unemployment', cmap='YlGn', legend=True)\n```\n:::\n\n::: {.cell-output .cell-output-display execution_count=10}\n```{=html}\n<div style=\"width:100%;\"><div style=\"position:relative;width:100%;height:0;padding-bottom:60%;\"><span style=\"color:#565656\">Make this Notebook Trusted to load map: File -> Trust Notebook</span><iframe srcdoc=\"&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    \n    &lt;meta http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://code.jquery.com/jquery-3.7.1.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;\n    &lt;script src=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.js&quot;&gt;&lt;/script&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/leaflet@1.9.3/dist/leaflet.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.0/css/all.min.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdnjs.cloudflare.com/ajax/libs/Leaflet.awesome-markers/2.0.2/leaflet.awesome-markers.css&quot;/&gt;\n    &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.jsdelivr.net/gh/python-visualization/folium/folium/templates/leaflet.awesome.rotate.min.css&quot;/&gt;\n    \n            &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width,\n                initial-scale=1.0, maximum-scale=1.0, user-scalable=no&quot; /&gt;\n            &lt;style&gt;\n                #map_54377ef06510d65ff669807c2795237e {\n                    position: relative;\n                    width: 100.0%;\n                    height: 100.0%;\n                    left: 0.0%;\n                    top: 0.0%;\n                }\n                .leaflet-container { font-size: 1rem; }\n            &lt;/style&gt;\n\n            &lt;style&gt;html, body {\n                width: 100%;\n                height: 100%;\n                margin: 0;\n                padding: 0;\n            }\n            &lt;/style&gt;\n\n            &lt;style&gt;#map {\n                position:absolute;\n                top:0;\n                bottom:0;\n                right:0;\n                left:0;\n                }\n            &lt;/style&gt;\n\n            &lt;script&gt;\n                L_NO_TOUCH = false;\n                L_DISABLE_3D = false;\n            &lt;/script&gt;\n\n        \n&lt;/head&gt;\n&lt;body&gt;\n    \n    \n            &lt;div class=&quot;folium-map&quot; id=&quot;map_54377ef06510d65ff669807c2795237e&quot; &gt;&lt;/div&gt;\n        \n&lt;/body&gt;\n&lt;script&gt;\n    \n    \n            var map_54377ef06510d65ff669807c2795237e = L.map(\n                &quot;map_54377ef06510d65ff669807c2795237e&quot;,\n                {\n                    center: [39.8333333, -98.585522],\n                    crs: L.CRS.EPSG3857,\n                    ...{\n  &quot;zoom&quot;: 4,\n  &quot;zoomControl&quot;: true,\n  &quot;preferCanvas&quot;: false,\n}\n\n                }\n            );\n\n            \n\n        \n    \n            var tile_layer_4b7e2b3ee355f9630120dae46746e808 = L.tileLayer(\n                &quot;https://tile.openstreetmap.org/{z}/{x}/{y}.png&quot;,\n                {\n  &quot;minZoom&quot;: 0,\n  &quot;maxZoom&quot;: 19,\n  &quot;maxNativeZoom&quot;: 19,\n  &quot;noWrap&quot;: false,\n  &quot;attribution&quot;: &quot;\\u0026copy; \\u003ca href=\\&quot;https://www.openstreetmap.org/copyright\\&quot;\\u003eOpenStreetMap\\u003c/a\\u003e contributors&quot;,\n  &quot;subdomains&quot;: &quot;abc&quot;,\n  &quot;detectRetina&quot;: false,\n  &quot;tms&quot;: false,\n  &quot;opacity&quot;: 1,\n}\n\n            );\n        \n    \n            tile_layer_4b7e2b3ee355f9630120dae46746e808.addTo(map_54377ef06510d65ff669807c2795237e);\n        \n&lt;/script&gt;\n&lt;/html&gt;\" style=\"position:absolute;width:100%;height:100%;left:0;top:0;border:none !important;\" allowfullscreen webkitallowfullscreen mozallowfullscreen></iframe></div></div>\n```\n:::\n:::\n\n\n:::\n::::\n\n###  Geopandas Choropleth Maps in streamlit.\n\nIf you plan to use `GeoDataFrame.explore()` then you will need to call `folium_static()` from the `streamlit_folium` module to display the map in Streamlit.\nHere's an example:\n\n::: {#e7a61f2f .cell execution_count=13}\n``` {.python .cell-code}\nfrom numpy import random\nimport geopandas as gpd\nimport pandas as pd\nimport streamlit as st\nimport streamlit_folium as sf\nimport folium\n\nst.title('Streamlit Geopandas Examples')\nst.caption('This is a simple example of how to use Streamlit to create visualizations with Geopandas')\n\n# Load the GeoPandas data\nst.write(\"## Saint Lucia Choropleth\")\ngdf = gpd.read_file(\"https://su-ist356-m003-fall-2025.github.io/course-home/assets/stlucia.geojson\")\ngdf['Amount'] = gdf.apply(lambda row: random.randint(50,275), axis=1)\nst.write(gdf)\n\nsf.folium_static(gdf.explore(gdf['Amount']))\n\nwards_df = gpd.read_file(\"https://raw.githubusercontent.com/mafudge/datasets/refs/heads/master/city-of-syracuse/wards.geojson\")\nwards_df['amount'] = wards_df.apply(lambda row: random.randint(1,50), axis=1)\n\nst.write('## City of Syracuse Wards - Choropleth')\nst.write(wards_df)\nsf.folium_static(wards_df.explore(wards_df['amount']))\n\nstlucia_df = pd.read_csv(\"https://raw.githubusercontent.com/mafudge/datasets/refs/heads/master/st-lucia/parishes.csv\")\nstlucia_df['Amount'] = stlucia_df.apply(lambda row: random.randint(50,500), axis=1)\n\n\nclassesdf = pd.read_csv(\"https://raw.githubusercontent.com/mafudge/datasets/master/delimited/class-schedule.csv\")\ngdf = gpd.GeoDataFrame(classesdf, geometry=gpd.points_from_xy(classesdf['Lon'], classesdf['Lat']))\nst.write(gdf)\nschine = (43.03986, -76.13375)\nm = folium.Map(location=schine, zoom_start=17)\nmout = gdf.explore(popup=\"Course\",lat=\"Lat\", lon=\"Lon\", m=m, marker_type=\"marker\")\nsf.folium_static(mout)\n```\n:::\n\n\n",
    "supporting": [
      "visualization-4_files/figure-html"
    ],
    "filters": [],
    "includes": {
      "include-in-header": [
        "<script src=\"https://cdn.jsdelivr.net/npm/requirejs@2.3.6/require.min.js\" integrity=\"sha384-c9c+LnTbwQ3aujuU7ULEPVvgLs+Fn6fJUvIGTsuu1ZcCf11fiEubah0ttpca4ntM sha384-6V1/AdqZRWk1KAlWbKBlGhN7VG4iE/yAZcO6NZPMF8od0vukrvr0tg4qY6NSrItx\" crossorigin=\"anonymous\"></script>\n<script src=\"https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js\" integrity=\"sha384-ZvpUoO/+PpLXR1lu4jmpXWu80pZlYUAfxl5NsBMWOEPSjUn/6Z/hRTt8+pR6L4N2\" crossorigin=\"anonymous\" data-relocate-top=\"true\"></script>\n<script type=\"application/javascript\">define('jquery', [],function() {return window.jQuery;})</script>\n"
      ]
    }
  }
}